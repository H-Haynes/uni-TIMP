var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,a)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,__spreadValues=(e,t)=>{for(var a in t||(t={}))__hasOwnProp.call(t,a)&&__defNormalProp(e,a,t[a]);if(__getOwnPropSymbols)for(var a of __getOwnPropSymbols(t))__propIsEnum.call(t,a)&&__defNormalProp(e,a,t[a]);return e};!function(e){"use strict";function t(e){if(e&&e.__esModule)return e;var t={__proto__:null,[Symbol.toStringTag]:"Module"};return e&&Object.keys(e).forEach((function(a){if("default"!==a){var i=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var a=t(e);const i=Object.prototype.toString,n=e=>i.call(e),l=e=>n(e).slice(8,-1);function o(e,t){return"Function"===l(t)?"function() { [native code] }":t}function s(e,t,a){if("string"==typeof __channelId__&&__channelId__)return a.push(t.replace("at ","uni-app:///")),console[e].apply(console,a);return a.map((function(e){const t=n(e).toLowerCase();if("[object object]"===t||"[object array]"===t)try{e="---BEGIN:JSON---"+JSON.stringify(e,o)+"---END:JSON---"}catch(a){e=t}else if(null===e)e="---NULL---";else if(void 0===e)e="---UNDEFINED---";else{const t=l(e).toUpperCase();e="NUMBER"===t||"BOOLEAN"===t?"---BEGIN:"+t+"---"+e+"---END:"+t+"---":String(e)}return e})).join("---COMMA---")+" "+t}function r(e,t,...a){const i=s(e,t,a);i&&console[e](i)}function c(e,t){return"string"==typeof e?t:e}const d=t=>(a,i=e.getCurrentInstance())=>!e.isInSSRComponentSetup&&e.injectHook(t,a,i),u=d("onShow"),m=d("onLoad");function h(){return"undefined"!=typeof navigator&&"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}}const p="function"==typeof Proxy;class f{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const a={};if(e.settings)for(const o in e.settings){const t=e.settings[o];a[o]=t.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let n=__spreadValues({},a);try{const e=localStorage.getItem(i),t=JSON.parse(e);Object.assign(n,t)}catch(l){}this.fallbacks={getSettings:()=>n,setSettings(e){try{localStorage.setItem(i,JSON.stringify(e))}catch(l){}n=e}},t.on("plugin:settings:set",((e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)})),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise((a=>{this.targetQueue.push({method:t,args:e,resolve:a})}))})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function g(e,t){const a=h(),i=h().__VUE_DEVTOOLS_GLOBAL_HOOK__,n=p&&e.enableEarlyProxy;if(!i||!a.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&n){const l=n?new f(e,i):null;(a.__VUE_DEVTOOLS_PLUGINS__=a.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:e,setupFn:t,proxy:l}),l&&t(l.proxiedTarget)}else i.emit("devtools-plugin:setup",e,t)}
/*!
   * vuex v4.0.2
   * (c) 2021 Evan You
   * @license MIT
   */var k="store";function v(t){return void 0===t&&(t=null),e.inject(null!==t?t:k)}function y(e,t){Object.keys(e).forEach((function(a){return t(e[a],a)}))}function _(e,t,a){return t.indexOf(e)<0&&(a&&a.prepend?t.unshift(e):t.push(e)),function(){var a=t.indexOf(e);a>-1&&t.splice(a,1)}}function w(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var a=e.state;x(e,a,[],e._modules.root,!0),b(e,a,t)}function b(t,a,i){var n=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var l=t._wrappedGetters,o={};y(l,(function(e,a){o[a]=function(e,t){return function(){return e(t)}}(e,t),Object.defineProperty(t.getters,a,{get:function(){return o[a]()},enumerable:!0})})),t._state=e.reactive({data:a}),t.strict&&function(t){e.watch((function(){return t._state.data}),(function(){}),{deep:!0,flush:"sync"})}(t),n&&i&&t._withCommit((function(){n.data=null}))}function x(e,t,a,i,n){var l=!a.length,o=e._modules.getNamespace(a);if(i.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=i),!l&&!n){var s=S(t,a.slice(0,-1)),r=a[a.length-1];e._withCommit((function(){s[r]=i.state}))}var c=i.context=function(e,t,a){var i=""===t,n={dispatch:i?e.dispatch:function(a,i,n){var l=E(a,i,n),o=l.payload,s=l.options,r=l.type;return s&&s.root||(r=t+r),e.dispatch(r,o)},commit:i?e.commit:function(a,i,n){var l=E(a,i,n),o=l.payload,s=l.options,r=l.type;s&&s.root||(r=t+r),e.commit(r,o,s)}};return Object.defineProperties(n,{getters:{get:i?function(){return e.getters}:function(){return D(e,t)}},state:{get:function(){return S(e.state,a)}}}),n}(e,o,a);i.forEachMutation((function(t,a){!function(e,t,a,i){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){a.call(e,i.state,t)}))}(e,o+a,t,c)})),i.forEachAction((function(t,a){var i=t.root?a:o+a,n=t.handler||t;!function(e,t,a,i){(e._actions[t]||(e._actions[t]=[])).push((function(t){var n,l=a.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},t);return(n=l)&&"function"==typeof n.then||(l=Promise.resolve(l)),e._devtoolHook?l.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):l}))}(e,i,n,c)})),i.forEachGetter((function(t,a){!function(e,t,a,i){if(e._wrappedGetters[t])return;e._wrappedGetters[t]=function(e){return a(i.state,i.getters,e.state,e.getters)}}(e,o+a,t,c)})),i.forEachChild((function(i,l){x(e,t,a.concat(l),i,n)}))}function D(e,t){if(!e._makeLocalGettersCache[t]){var a={},i=t.length;Object.keys(e.getters).forEach((function(n){if(n.slice(0,i)===t){var l=n.slice(i);Object.defineProperty(a,l,{get:function(){return e.getters[n]},enumerable:!0})}})),e._makeLocalGettersCache[t]=a}return e._makeLocalGettersCache[t]}function S(e,t){return t.reduce((function(e,t){return e[t]}),e)}function E(e,t,a){var i;return null!==(i=e)&&"object"==typeof i&&e.type&&(a=t,t=e,e=e.type),{type:e,payload:t,options:a}}var C="vuex:mutations",T="vuex:actions",V="vuex",N=0;function B(e,t){g({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:["vuex bindings"]},(function(a){a.addTimelineLayer({id:C,label:"Vuex Mutations",color:M}),a.addTimelineLayer({id:T,label:"Vuex Actions",color:M}),a.addInspector({id:V,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),a.on.getInspectorTree((function(a){if(a.app===e&&a.inspectorId===V)if(a.filter){var i=[];R(i,t._modules.root,a.filter,""),a.rootNodes=i}else a.rootNodes=[L(t._modules.root,"")]})),a.on.getInspectorState((function(a){if(a.app===e&&a.inspectorId===V){var i=a.nodeId;D(t,i),a.state=function(e,t,a){t="root"===a?t:t[a];var i=Object.keys(t),n={state:Object.keys(e.state).map((function(t){return{key:t,editable:!0,value:e.state[t]}}))};if(i.length){var l=function(e){var t={};return Object.keys(e).forEach((function(a){var i=a.split("/");if(i.length>1){var n=t,l=i.pop();i.forEach((function(e){n[e]||(n[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),n=n[e]._custom.value})),n[l]=P((function(){return e[a]}))}else t[a]=P((function(){return e[a]}))})),t}(t);n.getters=Object.keys(l).map((function(e){return{key:e.endsWith("/")?$(e):e,editable:!1,value:P((function(){return l[e]}))}}))}return n}((n=t._modules,(o=(l=i).split("/").filter((function(e){return e}))).reduce((function(e,t,a){var i=e[t];if(!i)throw new Error('Missing module "'+t+'" for path "'+l+'".');return a===o.length-1?i:i._children}),"root"===l?n:n.root._children)),"root"===i?t.getters:t._makeLocalGettersCache,i)}var n,l,o})),a.on.editInspectorState((function(a){if(a.app===e&&a.inspectorId===V){var i=a.nodeId,n=a.path;"root"!==i&&(n=i.split("/").filter(Boolean).concat(n)),t._withCommit((function(){a.set(t._state.data,n,a.state.value)}))}})),t.subscribe((function(e,t){var i={};e.payload&&(i.payload=e.payload),i.state=t,a.notifyComponentUpdate(),a.sendInspectorTree(V),a.sendInspectorState(V),a.addTimelineEvent({layerId:C,event:{time:Date.now(),title:e.type,data:i}})})),t.subscribeAction({before:function(e,t){var i={};e.payload&&(i.payload=e.payload),e._id=N++,e._time=Date.now(),i.state=t,a.addTimelineEvent({layerId:T,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:i}})},after:function(e,t){var i={},n=Date.now()-e._time;i.duration={_custom:{type:"duration",display:n+"ms",tooltip:"Action duration",value:n}},e.payload&&(i.payload=e.payload),i.state=t,a.addTimelineEvent({layerId:T,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:i}})}})}))}var M=8702998,I={label:"namespaced",textColor:16777215,backgroundColor:6710886};function $(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function L(e,t){return{id:t||"root",label:$(t),tags:e.namespaced?[I]:[],children:Object.keys(e._children).map((function(a){return L(e._children[a],t+a+"/")}))}}function R(e,t,a,i){i.includes(a)&&e.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:t.namespaced?[I]:[]}),Object.keys(t._children).forEach((function(n){R(e,t._children[n],a,i+n+"/")}))}function P(e){try{return e()}catch(t){return t}}var O=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var a=e.state;this.state=("function"==typeof a?a():a)||{}},z={namespaced:{configurable:!0}};z.namespaced.get=function(){return!!this._rawModule.namespaced},O.prototype.addChild=function(e,t){this._children[e]=t},O.prototype.removeChild=function(e){delete this._children[e]},O.prototype.getChild=function(e){return this._children[e]},O.prototype.hasChild=function(e){return e in this._children},O.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},O.prototype.forEachChild=function(e){y(this._children,e)},O.prototype.forEachGetter=function(e){this._rawModule.getters&&y(this._rawModule.getters,e)},O.prototype.forEachAction=function(e){this._rawModule.actions&&y(this._rawModule.actions,e)},O.prototype.forEachMutation=function(e){this._rawModule.mutations&&y(this._rawModule.mutations,e)},Object.defineProperties(O.prototype,z);var A=function(e){this.register([],e,!1)};function j(e,t,a){if(t.update(a),a.modules)for(var i in a.modules){if(!t.getChild(i))return;j(e.concat(i),t.getChild(i),a.modules[i])}}A.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},A.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,a){return e+((t=t.getChild(a)).namespaced?a+"/":"")}),"")},A.prototype.update=function(e){j([],this.root,e)},A.prototype.register=function(e,t,a){var i=this;void 0===a&&(a=!0);var n=new O(t,a);0===e.length?this.root=n:this.get(e.slice(0,-1)).addChild(e[e.length-1],n);t.modules&&y(t.modules,(function(t,n){i.register(e.concat(n),t,a)}))},A.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),a=e[e.length-1],i=t.getChild(a);i&&i.runtime&&t.removeChild(a)},A.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),a=e[e.length-1];return!!t&&t.hasChild(a)};var F=function(e){var t=this;void 0===e&&(e={});var a=e.plugins;void 0===a&&(a=[]);var i=e.strict;void 0===i&&(i=!1);var n=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new A(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=n;var l=this,o=this.dispatch,s=this.commit;this.dispatch=function(e,t){return o.call(l,e,t)},this.commit=function(e,t,a){return s.call(l,e,t,a)},this.strict=i;var r=this._modules.root.state;x(this,r,[],this._modules.root),b(this,r),a.forEach((function(e){return e(t)}))},U={state:{configurable:!0}};F.prototype.install=function(e,t){e.provide(t||k,this),e.config.globalProperties.$store=this,void 0!==this._devtools&&this._devtools&&B(e,this)},U.state.get=function(){return this._state.data},U.state.set=function(e){},F.prototype.commit=function(e,t,a){var i=this,n=E(e,t,a),l=n.type,o=n.payload,s={type:l,payload:o},r=this._mutations[l];r&&(this._withCommit((function(){r.forEach((function(e){e(o)}))})),this._subscribers.slice().forEach((function(e){return e(s,i.state)})))},F.prototype.dispatch=function(e,t){var a=this,i=E(e,t),n=i.type,l=i.payload,o={type:n,payload:l},s=this._actions[n];if(s){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(o,a.state)}))}catch(c){}var r=s.length>1?Promise.all(s.map((function(e){return e(l)}))):s[0](l);return new Promise((function(e,t){r.then((function(t){try{a._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(o,a.state)}))}catch(c){}e(t)}),(function(e){try{a._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(o,a.state,e)}))}catch(c){}t(e)}))}))}},F.prototype.subscribe=function(e,t){return _(e,this._subscribers,t)},F.prototype.subscribeAction=function(e,t){return _("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},F.prototype.watch=function(t,a,i){var n=this;return e.watch((function(){return t(n.state,n.getters)}),a,Object.assign({},i))},F.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},F.prototype.registerModule=function(e,t,a){void 0===a&&(a={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),x(this,this.state,e,this._modules.get(e),a.preserveState),b(this,this.state)},F.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){delete S(t.state,e.slice(0,-1))[e[e.length-1]]})),w(this)},F.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},F.prototype.hotUpdate=function(e){this._modules.update(e),w(this,!0)},F.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(F.prototype,U);var H=(e,t)=>{const a=e.__vccOpts||e;for(const[i,n]of t)a[i]=n;return a};var G=H({name:"fui-drawer",emits:["close"],props:{show:{type:Boolean,default:!1},direction:{type:String,default:"right"},background:{type:String,default:"#fff"},zIndex:{type:[Number,String],default:996},maskClosable:{type:Boolean,default:!0},maskBackground:{type:String,default:"rgba(0,0,0,.6)"}},data:()=>({isNvue:!1,isShow:!1}),methods:{handleClose(e){this.maskClosable&&this.$emit("close",{})},stop(e,t){}}},[["render",function(t,a,i,n,l,o){return l.isShow||!l.isNvue?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["fui-drawer__popup-wrap",{"fui-drawer__wrap-show":i.show}]),style:e.normalizeStyle({zIndex:i.zIndex,background:i.maskBackground,alignItems:"left"===i.direction?"flex-start":"flex-end"}),onClick:a[1]||(a[1]=e.withModifiers(((...e)=>o.handleClose&&o.handleClose(...e)),["stop"])),onTouchmove:a[2]||(a[2]=e.withModifiers(((...e)=>o.stop&&o.stop(...e)),["stop","prevent"])),ref:"fui_dwr_mk_ani"},[e.createElementVNode("view",{ref:"fui_dwr_ani",class:e.normalizeClass(["fui-drawer__popup",["fui-drawer_"+i.direction,i.show?"fui-drawer__show":""]]),style:e.normalizeStyle({background:i.background}),onClick:a[0]||(a[0]=e.withModifiers((e=>o.stop(e,!0)),["stop"]))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)],38)):e.createCommentVNode("",!0)}],["__scopeId","data-v-e7682076"]]);var Y=H({setup(t){const a=e.readonly("http://preferyou.cn/freed/icon.png"),i=v(),n=e.inject("$eventBus"),l=e.ref(null),o=e.ref(!1),s=e.ref(i.state.currentTime);u((()=>{i.state.audioManager.onPlay&&i.state.audioManager.onPlay((()=>{s.value=i.state.audioManager.currentTime})),i.state.audioManager.ontimeupdate=()=>{s.value=i.state.audioManager.currentTime},i.state.audioManager.onTimeUpdate&&i.state.audioManager.onTimeUpdate((()=>{s.value=i.state.audioManager.currentTime}))}));const c=()=>{n.emit("pause")},d=()=>{n.emit("play")},m=()=>{r("log","at components/TimpAudio.vue:93",l.value.open),o.value=!0,l.vlaue&&l.value.open()},h=()=>{if(!i.state.audioIdBaseInfo.id)return uni.showToast({title:"暂无播放曲目",icon:"none"});uni.navigateTo({url:"/pages/lyric/lyric"})};return(t,r)=>(e.openBlock(),e.createElementBlock("view",{class:"fixed bottom-0 shadow-sm shadow-inner w-full left-0 h-12 flex items-center"},[e.createElementVNode("view",{class:"filter grayscale linear-bg w-full h-full",style:{filter:"blur(1px)"}}),e.createElementVNode("view",{class:"absolute left-0 top-0 w-full h-full items-center flex px-2 text-white"},[e.createElementVNode("view",{class:"w-12 h-12 border rounded-full overflow-hidden mr-2 relative -top-2"},[e.createElementVNode("image",{onClick:h,"lazy-load":"true",class:e.normalizeClass([{"album-rotate":e.unref(i).state.audioPlaying},"w-full h-full"]),src:e.unref(i).state.audioInfo.picUrl||e.unref(a)},null,10,["src"])]),e.createElementVNode("view",{class:"flex flex-col justify-center items-center flex-1 truncate"},[e.createElementVNode("text",{class:"text-sm text-gray-200 truncate"},e.toDisplayString(e.unref(i).state.audioInfo.name||"TIMP,你想听的都在这里!"),1),e.createElementVNode("text",{class:"text-xs text-gray-300 truncate"},e.toDisplayString(e.unref(i).state.audioInfo.name?e.unref(i).state.audioInfo.author.map((e=>e.name)).join("&"):"暂无歌曲"),1)]),e.unref(i).state.audioPlaying?(e.openBlock(),e.createElementBlock("text",{key:1,class:"iconfont icon-zantingtingzhi ml-2 text-2xl",onClick:c})):(e.openBlock(),e.createElementBlock("text",{key:0,class:"iconfont icon-bofang2 text-3xl",onClick:d})),e.createElementVNode("text",{onClick:m,class:"iconfont icon-liebiao_o ml-2 text-3xl"}),e.createElementVNode("view",{class:"progress absolute bottom-0 left-0 h-1 bg-blue-700",style:e.normalizeStyle({width:1e3*s.value/e.unref(i).state.audioInfo.time*100+"%"})},null,4)]),e.createVNode(G,{ref_key:"drawRef",ref:l,show:o.value,onClose:r[0]||(r[0]=e=>o.value=!1)},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"w-64 h-full bg-gray-50 flex flex-col"},[e.createElementVNode("view",{class:"flex justify-between text-sm linear-bg text-white py-3 px-3"},[e.createElementVNode("text",null,"歌曲名"),e.createElementVNode("text",null,"歌手")]),e.createElementVNode("scroll-view",{class:"flex-1 overflow-hidden","scroll-y":"true"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i).state.playList,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["py-3 text-gray-500 px-3 flex justify-between text-xs",{"bg-gray-200":a%2==0,"text-red":e.unref(i).state.audioIdBaseInfo.id==t.id&&e.unref(i).state.audioIdBaseInfo.platform==t.platform}]),key:t.id,onClick:e=>(e=>{n.emit("playSong",{id:e.id,platform:e.platform,auto:!0})})(t)},[e.createElementVNode("text",{class:"truncate mr-2 flex-2 flex-shrink-0"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"truncate flex-1 text-right"},e.toDisplayString(t.author.map((e=>e.name)).join("&")),1)],10,["onClick"])))),128))])])])),_:1},8,["show"])]))}},[["__scopeId","data-v-36866449"]]),W=e=>(t,...a)=>new Promise(((i,n)=>{e(Object.assign({},t,{success:i,fail:n}),...a)}));const q=e.defineComponent({setup(t){const a=v(),i=()=>{W(uni.showModal)({title:"创建歌单",editable:!0,placeholderText:"请输入歌单名称(20字内)"}).then((e=>{if(e.confirm){if(e.content.trim().length>20||!e.content.trim())return uni.showToast({title:"名称20字内",icon:"none"});const t={id:Math.random().toString(36).substr(2),platform:0,pic:"http://preferyou.cn/freed/icon.png",name:e.content.trim(),list:[]},i=a.state.albumList.slice(0);i.push(t),uni.setStorageSync("albumList",i),a.commit("setAlbumList",i)}}))},n=(e,t,a)=>{uni.navigateTo({url:`/pages/album/album?type=${t}&id=${e}&rank=${a}`})};return(t,l)=>(e.openBlock(),e.createElementBlock("view",{class:"h-full overflow-y-scroll"},[e.createElementVNode("view",{class:"my-2 px-4 mt-5"},[e.createElementVNode("view",{class:"flex justify-between mb-2"},[e.createElementVNode("text",{class:"text-xl font-bold"},"我的音乐")]),e.createElementVNode("view",{onClick:l[0]||(l[0]=e=>n(0,0,0)),class:"flex px-5 items-center py-2 border-b"},[e.createElementVNode("image",{class:"w-12 h-12 rounded mr-3",src:"http://preferyou.cn/freed/icon.png"}),e.createElementVNode("text",{class:"text-sm text-gray-500"},"我喜欢")])]),e.createElementVNode("view",{class:"my-2 px-4 mt-5",style:{"min-height":"150rpx"}},[e.createElementVNode("view",{class:"flex justify-between mb-2"},[e.createElementVNode("text",{class:"text-xl font-bold"},"我的歌单"),e.createElementVNode("view",{class:"flex items-center text-gray-400"},[e.createElementVNode("text",{onClick:i,class:"iconfont icon-plus text-xl"})])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a).state.albumList,(t=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>n(t.id,0,0),key:t.id,class:"flex px-5 items-center py-2 border-b"},[e.createElementVNode("image",{class:"w-12 h-12 rounded mr-3",src:t.pic||"http://preferyou.cn/freed/icon.png"},null,8,["src"]),e.createElementVNode("text",{class:"text-sm text-gray-500"},e.toDisplayString(t.name),1)],8,["onClick"])))),128))]),e.createElementVNode("view",{class:"my-2 px-4"},[e.createElementVNode("text",{class:"text-xl font-bold"},"我的收藏"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a).state.collectList,(t=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>n(t.id,t.platform,t.isRank),key:t.id,class:"flex px-5 items-center py-2 border-b"},[e.createElementVNode("image",{class:"w-12 h-12 rounded mr-3",src:t.pic||"http://preferyou.cn/freed/icon.png"},null,8,["src"]),e.createElementVNode("text",{class:"text-sm text-gray-500"},e.toDisplayString(t.name),1)],8,["onClick"])))),128))])]))}});var Q=H({name:"w-loading",props:{text:String,mask:Boolean|String,click:Boolean|String},data:()=>({show:!1}),methods:{preventTouchMove(){r("log","at components/w-loading/w-loading.vue:35","stop user scroll it!")},Mclose(){"false"!=this.click&&0!=this.click||(this.show=!1)},open(){this.show=!0},close(){this.show=!1}}},[["render",function(t,a,i,n,l,o){return l.show?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["mask","true"==i.mask||1==i.mask?"mask-show":""]),onClick:a[0]||(a[0]=(...e)=>o.Mclose&&o.Mclose(...e)),onTouchmove:a[1]||(a[1]=e.withModifiers(((...e)=>o.preventTouchMove&&o.preventTouchMove(...e)),["stop","prevent"]))},[e.createElementVNode("view",{class:"preloader"},[e.createElementVNode("view",{class:"loader"})]),e.createElementVNode("view",{class:"title"},e.toDisplayString(i.text),1)],34)):e.createCommentVNode("",!0)}],["__scopeId","data-v-6215943b"]]);const K="http://preferyou.cn/wy",J=W(uni.request);var X=H({emits:["bannerClick"],props:{bannerList:{type:Array,default:()=>[]},swiperConfig:{type:Object,default:()=>({indicatorDots:!0,indicatorColor:"rgba(255, 255, 255, .4)",indicatorActiveColor:"rgba(255, 255, 255, 1)",autoplay:!1,interval:3e3,duration:300,circular:!0,previousMargin:"40rpx",nextMargin:"40rpx"})},scaleX:{type:String,default:(634/550).toFixed(4)},scaleY:{type:String,default:(378/328).toFixed(4)}},computed:{listLen(){return this.bannerList.length}},data:()=>({curIndex:0,descIndex:0,isDescAnimating:!1}),methods:{swiperChange(e){const t=this;this.curIndex=e.detail.current,this.isDescAnimating=!0;let a=setTimeout((function(){t.descIndex=e.detail.current,clearTimeout(a)}),150)},animationfinish(e){this.isDescAnimating=!1},bannerClick(e){this.$emit("bannerClick",e)}}},[["render",function(t,a,i,n,l,o){return e.openBlock(),e.createElementBlock("div",{class:"banner-container"},[e.createElementVNode("swiper",{style:{width:"100vw",height:"340rpx"},"indicator-dots":i.swiperConfig.indicatorDots,"indicator-color":i.swiperConfig.indicatorColor,"indicator-active-color":i.swiperConfig.indicatorActiveColor,autoplay:i.swiperConfig.autoplay,interval:i.swiperConfig.interval,duration:i.swiperConfig.duration,circular:i.swiperConfig.circular,"previous-margin":i.swiperConfig.previousMargin,"next-margin":i.swiperConfig.nextMargin,onChange:a[0]||(a[0]=(...e)=>o.swiperChange&&o.swiperChange(...e)),onAnimationfinish:a[1]||(a[1]=(...e)=>o.animationfinish&&o.animationfinish(...e))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.bannerList,((t,a)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:a},[e.createElementVNode("div",{class:e.normalizeClass(["image-container",[0===l.curIndex?a===o.listLen-1?"item-left":1===a?"item-right":"item-center":l.curIndex===o.listLen-1?0===a?"item-right":a===o.listLen-2?"item-left":"item-center":a===l.curIndex-1?"item-left":a===l.curIndex+1?"item-right":"item-center"]])},[e.createElementVNode("image",{src:t.pic,class:"slide-image",style:e.normalizeStyle({transform:l.curIndex===a?"scale("+i.scaleX+","+i.scaleY+")":"scale(1,1)",transitionDuration:".3s",transitionTimingFunction:"ease"}),onClick:e=>o.bannerClick(t)},null,12,["src","onClick"])],2)])))),128))],40,["indicator-dots","indicator-color","indicator-active-color","autoplay","interval","duration","circular","previous-margin","next-margin"])])}],["__scopeId","data-v-741c9580"]]);var Z=H(e.defineComponent({setup(t){const a=e.ref([]),i=e.ref([]),n=e.ref([]),l=e.ref(!1),o=e.ref(null),s=e.ref(1),c=e.ref(!1),d=e.ref(null);getApp().globalData.audioInfo.name="8888",J({url:`${K}/personalized?limit=120`,method:"GET"}).then((e=>{e.data.result&&(a.value=e.data.result.map((e=>({name:e.name,pic:e.picUrl,id:e.id}))))})),J({url:`${K}/banner`,method:"GET"}).then((e=>{200===e.data.code&&(i.value=e.data.banners.map((e=>({pic:e.imageUrl,type:1===e.targetType?1:2,id:e.targetId}))))})),J({url:`${K}/playlist/catlist/hot`,methods:"GET"}).then((e=>{200===e.data.code&&(n.value=e.data.sub.map((e=>({id:e.name,name:e.name,type:1}))))}));const u=t=>{r("log","at components/NeteaseList.vue:74",e.toRaw(t))},m=()=>{c.value=!0,J({url:`${K}/toplist`,method:"GET"}).then((e=>{200===e.data.code&&(a.value=e.data.list.map((e=>({name:e.name,id:e.id,pic:e.coverImgUrl,rank:1}))))})).finally((()=>{c.value=!1}))},h=e=>{e!==o&&(o.value=e,s.value=1)},p=async(e,t=1)=>{s.value=t,o.value=e,c.value=!0;const i=await((e,t=1)=>J({url:`${K}/top/playlist?cat=${e}&offset=${50*(t-1)}`,method:"GET"}))(e,t);if(200===i.data.code){const e=i.data.playlists.map((e=>({id:e.id,name:e.name,pic:e.coverImgUrl})));a.value=1==t?e:a.value.concat(e)}c.value=!1};e.watch([()=>o.value,()=>s.value],(()=>{0==+o.value?m():o.value&&p(o.value,s.value)}));const f=()=>{!c.value&&o.value&&"0"!=o.value&&(s.value+=1)};return e.watch((()=>c.value),(()=>{c.value?d.value&&d.value.open():d.value&&d.value.close()})),(t,s)=>(e.openBlock(),e.createElementBlock("scroll-view",{onScrolltolower:f,onLowerThreshold:e=>200,"scroll-y":"",class:"h-full"},[e.createVNode(Q,{mask:"true",click:"true",ref_key:"loadingRef",ref:d},null,512),e.createVNode(X,{scaleY:"1.1",scaleX:"1.1",onBannerClick:u,bannerList:i.value},null,8,["bannerList"]),e.createElementVNode("view",{class:"my-3 px-2"},[e.createElementVNode("text",{onClick:s[0]||(s[0]=e=>h(0)),class:e.normalizeClass([{"current-category border-gray-100":0===o.value},"inline-block text-sm text-red-500 border border-red-500 mr-1 px-2 mb-2"])},"排行榜",2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value.slice(0,10),(t=>(e.openBlock(),e.createElementBlock("text",{onClick:e=>h(t.id),class:e.normalizeClass([{"current-category":o.value===t.id},"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"]),key:t.id},e.toDisplayString(t.name),11,["onClick"])))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value.slice(10,n.value.length-1),(t=>e.withDirectives((e.openBlock(),e.createElementBlock("text",{onClick:e=>h(t.id),class:e.normalizeClass([{"current-category":o.value===t.id,hidden:!l.value},"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"]),key:t.id},e.toDisplayString(t.name),11,["onClick"])),[[e.vShow,l.value]]))),128)),l.value?(e.openBlock(),e.createElementBlock("text",{key:1,onClick:s[2]||(s[2]=e=>l.value=!1),class:"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"},"收起")):(e.openBlock(),e.createElementBlock("text",{key:0,onClick:s[1]||(s[1]=e=>l.value=!0),class:"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"},"···"))]),e.createElementVNode("view",{class:"flex flex-wrap justify-around"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(t=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>(({id:e,rank:t})=>{uni.navigateTo({url:`/pages/album/album?type=1&id=${e}&rank=${t||0}`})})(t),class:"w-28",key:t.id},[e.createElementVNode("image",{class:"w-28 h-28 rounded","lazy-load":!0,src:t.pic},null,8,["src"]),e.createElementVNode("text",{class:"text-xs inline-block leading-5 h-10 overflow-hidden"},e.toDisplayString(t.name),1)],8,["onClick"])))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(3-a.value.length%3,(t=>(e.openBlock(),e.createElementBlock("view",{class:"w-28 empty",key:t})))),128))])],32))}}),[["__scopeId","data-v-4395d71f"]]);const ee="http://preferyou.cn/qq",te=W(uni.request);var ae=H(e.defineComponent({setup(t){const a=e.ref([]),i=e.ref([]),n=e.ref([]),l=e.ref(!1),o=e.ref(null),s=e.ref(1),c=e.ref(!1),d=e.ref(null);te({url:`${ee}/getRecommend`,method:"GET"}).then((e=>{0===e.data.response.code&&(a.value=e.data.response.playlist.data.v_playlist.map((e=>({name:e.title,pic:e.cover_url_small,id:e.tid}))),i.value=e.data.response.focus.data.content.map((e=>({pic:e.pic_info.url,id:e.jump_info.url,type:10002===e.type?1:2}))))})),te({url:`${ee}/getSongListCategories`,methods:"GET"}).then((e=>{if(0===e.data.response.code){let t=e.data.response.data.categories.map((e=>e.items.map((e=>({name:e.categoryName,id:e.categoryId,type:2})))));n.value=t.reduce(((e,t)=>e.concat(t)),[])}}));const u=t=>{r("log","at components/QQList.vue:69",e.toRaw(t))},m=()=>{c.value=!0,te({url:`${ee}/getTopLists?limit=50`,method:"GET"}).then((e=>{0===e.data.response.code&&(a.value=e.data.response.data.topList.map((e=>({name:e.topTitle,id:e.id,pic:e.picUrl,rank:1}))))})).finally((()=>{c.value=!1}))},h=e=>{e!==o&&(o.value=e,s.value=1)},p=async(e,t=1)=>{s.value=t,o.value=e,c.value=!0;try{const i=await((e,t=1)=>te({url:`${ee}/getSongLists?categoryId=${e}&page=${t}`,method:"GET"}))(e,t);if(0===i.data.response.code){const e=i.data.response.data.list.map((e=>({id:e.dissid,name:e.dissname,pic:e.imgurl})));a.value=1==t?e:a.value.concat(e)}c.value=!1}catch{c.value=!1}};e.watch([()=>o.value,()=>s.value],(()=>{0==+o.value?m():o.value&&p(o.value,s.value)}));const f=e=>{!c.value&&o.value&&"0"!=o.value&&(s.value+=1)};return e.watch((()=>c.value),(()=>{c.value?d.value&&d.value.open():d.value&&d.value.close()})),(t,s)=>(e.openBlock(),e.createElementBlock("scroll-view",{onScrolltolower:f,onLowerThreshold:e=>200,"scroll-y":"",class:"h-full"},[e.createVNode(Q,{mask:"true",click:"true",ref_key:"loadingRef",ref:d},null,512),e.createVNode(X,{scaleY:"1.1",scaleX:"1.1",onBannerClick:u,bannerList:i.value},null,8,["bannerList"]),e.createElementVNode("view",{class:"mb-3 px-2"},[e.createElementVNode("text",{onClick:s[0]||(s[0]=e=>h(0)),class:e.normalizeClass([{"current-category border-gray-100":0===o.value},"inline-block text-sm text-red-500 border border-red-500 mr-1 px-2 mb-2"])},"排行榜",2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value.slice(0,10),(t=>(e.openBlock(),e.createElementBlock("text",{onClick:e=>h(t.id),class:e.normalizeClass([{"current-category":o.value===t.id},"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"]),key:t.name},e.toDisplayString(t.name),11,["onClick"])))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value.slice(10,n.value.length-1),(t=>(e.openBlock(),e.createElementBlock("text",{onClick:e=>h(t.id),class:e.normalizeClass([{"current-category":o.value===t.id,hidden:!l.value},"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"]),key:t.name},e.toDisplayString(t.name),11,["onClick"])))),128)),l.value?(e.openBlock(),e.createElementBlock("text",{key:1,onClick:s[2]||(s[2]=e=>l.value=!1),class:"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"},"收起")):(e.openBlock(),e.createElementBlock("text",{key:0,onClick:s[1]||(s[1]=e=>l.value=!0),class:"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"},"···"))]),e.createElementVNode("view",{class:"flex flex-wrap justify-around"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(t=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>{return a=t,void uni.navigateTo({url:`/pages/album/album?type=2&id=${a.id}&rank=${a.rank||0}`});var a},class:"w-28",key:t.id},[e.createElementVNode("image",{class:"w-28 h-28 rounded","lazy-load":!0,src:t.pic},null,8,["src"]),e.createElementVNode("text",{class:"text-xs inline-block leading-5 h-10 overflow-hidden"},e.toDisplayString(t.name),1)],8,["onClick"])))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(3-a.value.length%3,(t=>(e.openBlock(),e.createElementBlock("view",{class:"w-28 empty",key:t})))),128))])],32))}}),[["__scopeId","data-v-4d7b8288"]]);const ie="http://preferyou.cn/kuwo",ne=W(uni.request),le=()=>ne({url:`${ie}/kuwo/rank`,method:"GET"});var oe=H(e.defineComponent({setup(t){const a=e.ref([]),i=e.ref([]),n=e.ref([]),l=e.ref(!1),o=e.ref(null),s=e.ref(1),c=e.ref(!1),d=e.ref(null);ne({url:`${ie}/kuwo/rec_gedan?pn=30`,method:"GET"}).then((e=>{200===e.data.code&&(a.value=e.data.data.list.map((e=>({name:e.name,pic:e.img,id:e.id}))))})),ne({url:`${ie}/kuwo/banner`,method:"GET"}).then((e=>{200===e.data.code&&(i.value=e.data.data.map((e=>{let t=e.url.split("/");return{pic:e.pic,type:e.url.includes("playlist")?2:e.url.includes("album")?3:0,id:t[t.length-1]}})))})),ne({url:`${ie}/kuwo/getTagList`,methods:"GET"}).then((e=>{if(200===e.data.code){let t=e.data.data.reduce(((e,t)=>{let a=t.data.map((e=>({name:e.name,id:e.id,type:3})));return e.concat(a)}),[]);n.value=t.reduce(((e,t)=>e.concat(t)),[])}}));const u=t=>{r("log","at components/kuwoList.vue:79",e.toRaw(t))},m=e=>{e!==o&&(o.value=e,s.value=1)},h=async(e,t=1)=>{s.value=t,o.value=e,c.value=!0;const i=await((e,t=1)=>ne({url:`${ie}/kuwo/playList/getTagPlayList?id=${e}&pn=${t}`,method:"GET"}))(e,t);if(200===i.data.code){const e=i.data.data.data.map((e=>({name:e.name,pic:e.img,id:e.id})));a.value=1==t?e:a.value.concat(e)}c.value=!1};e.watch([()=>o.value,()=>s.value],(()=>{0==+o.value?(c.value=!0,le().then((e=>{if(200===e.data.code){const t=e.data.data.reduce(((e,t)=>{let a=t.list.map((e=>({id:e.sourceid,name:e.name,pic:e.pic,rank:1})));return e.concat(a)}),[]);a.value=t}})).finally((()=>{c.value=!1}))):o.value&&h(o.value,s.value)}));const p=()=>{!c.value&&o.value&&"0"!=o.value&&(s.value+=1)};return e.watch((()=>c.value),(()=>{c.value?d.value&&d.value.open():d.value&&d.value.close()})),(t,s)=>(e.openBlock(),e.createElementBlock("scroll-view",{onScrolltolower:p,onLowerThreshold:e=>200,"scroll-y":"",class:"h-full"},[e.createVNode(Q,{mask:"true",click:"true",ref_key:"loadingRef",ref:d},null,512),e.createVNode(X,{scaleY:"1.1",scaleX:"1.1",onBannerClick:u,bannerList:i.value},null,8,["bannerList"]),e.createElementVNode("view",{class:"mb-3 px-2"},[e.createElementVNode("text",{onClick:s[0]||(s[0]=e=>m(0)),class:e.normalizeClass([{"current-category border-gray-100":0===o.value},"inline-block text-sm text-red-500 border border-red-500 mr-1 px-2 mb-2"])},"排行榜",2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value.slice(0,10),(t=>(e.openBlock(),e.createElementBlock("text",{onClick:e=>m(t.id),class:e.normalizeClass([{"current-category":o.value===t.id},"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"]),key:t.name},e.toDisplayString(t.name),11,["onClick"])))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value.slice(10,n.value.length-1),(t=>(e.openBlock(),e.createElementBlock("text",{onClick:e=>m(t.id),class:e.normalizeClass([{"current-category":o.value===t.id,hidden:!l.value},"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"]),key:t.name},e.toDisplayString(t.name),11,["onClick"])))),128)),l.value?(e.openBlock(),e.createElementBlock("text",{key:1,onClick:s[2]||(s[2]=e=>l.value=!1),class:"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"},"收起")):(e.openBlock(),e.createElementBlock("text",{key:0,onClick:s[1]||(s[1]=e=>l.value=!0),class:"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"},"···"))]),e.createElementVNode("view",{class:"flex flex-wrap justify-around"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(t=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>{return a=t,void uni.navigateTo({url:`/pages/album/album?type=3&id=${a.id}&rank=${a.rank||0}`});var a},class:"w-28",key:t.id},[e.createElementVNode("image",{class:"w-28 h-28 rounded","lazy-load":!0,src:t.pic},null,8,["src"]),e.createElementVNode("text",{class:"text-xs inline-block leading-5 h-10 overflow-hidden"},e.toDisplayString(t.name),1)],8,["onClick"])))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(3-a.value.length%3,(t=>(e.openBlock(),e.createElementBlock("view",{class:"w-28 empty",key:t})))),128))])],32))}}),[["__scopeId","data-v-4c0d2493"]]);const se="http://preferyou.cn/kuwo",re=W(uni.request),ce=e=>re({url:`${se}/kugou/playInfo?id=${e}`});var de=H(e.defineComponent({setup(t){const a=e.ref([]),i=e.ref([]),n=e.ref(!1),l=e.ref(null),o=e.ref(1),s=e.ref(!1),r=e.ref(null),c=e=>{s.value=!0,((e=1)=>re({url:`${se}/kugou/getAlbumList?&page=${e}`,method:"GET"}))(e).then((t=>{const i=t.data.plist.list.info.map((e=>({name:e.specialname,pic:e.imgurl.replace("{size}","400"),id:e.specialid})));a.value=1==e.value?i:a.value.concat(i),s.value=!1})).finally((()=>{s.value=!1}))};c(o.value),re({url:`${se}/kugou/getTagList`,methods:"GET"}).then((e=>{200===e.data.code&&(i.value=e.data.result)}));const d=()=>{s.value=!0,re({url:`${se}/kugou/rank/list`,method:"GET"}).then((e=>{a.value=e.data.rank.list.map((e=>({id:e.rankid,name:e.rankname,pic:e.imgurl.replace("{size}","400"),rank:1})))})).finally((()=>{s.value=!1}))},u=e=>{e!==l&&(l.value=e,o.value=1)},m=async(e,t=1)=>{o.value=t,l.value=e,s.value=!0;try{const t=await((e,t=1)=>re({url:`${se}/kugou/albumList?tagid=${e}&page=${t}`,method:"GET"}))(e,o.value);if(0===t.data.errcode&&t.data.data.info){const e=t.data.data.info.map((e=>({name:e.specialname,pic:e.imgurl.replace("{size}","400"),id:e.specialid})));a.value=1===o.value?e:a.value.concat(e)}s.value=!1}catch{s.value=!1}};e.watch([()=>l.value,()=>o.value],(()=>{null==l.value?c(o.value):0==+l.value?d():l.value&&m(l.value,o.value)}));const h=()=>{s.value||"0"==l.value||(o.value+=1)};return e.watch((()=>s.value),(()=>{s.value?r.value&&r.value.open():r.value&&r.value.close()})),(t,o)=>(e.openBlock(),e.createElementBlock("scroll-view",{onScrolltolower:h,onLowerThreshold:e=>200,"scroll-y":"",class:"h-full"},[e.createVNode(Q,{mask:"true",click:"true",ref_key:"loadingRef",ref:r},null,512),e.createElementVNode("view",{class:"mb-3 px-2"},[e.createElementVNode("text",{onClick:o[0]||(o[0]=e=>u(0)),class:e.normalizeClass([{"current-category border-gray-100":0===l.value},"inline-block text-sm text-red-500 border border-red-500 mr-1 px-2 mb-2"])},"排行榜",2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value.slice(0,10),(t=>(e.openBlock(),e.createElementBlock("text",{onClick:e=>u(t.id),class:e.normalizeClass([{"current-category":l.value===t.id},"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"]),key:t.name},e.toDisplayString(t.name),11,["onClick"])))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value.slice(10,i.value.length-1),(t=>e.withDirectives((e.openBlock(),e.createElementBlock("text",{onClick:e=>u(t.id),class:e.normalizeClass([{"current-category":l.value===t.id,hidden:!n.value},"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"]),key:t.name},e.toDisplayString(t.name),11,["onClick"])),[[e.vShow,n.value]]))),128)),n.value?(e.openBlock(),e.createElementBlock("text",{key:1,onClick:o[2]||(o[2]=e=>n.value=!1),class:"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"},"收起")):(e.openBlock(),e.createElementBlock("text",{key:0,onClick:o[1]||(o[1]=e=>n.value=!0),class:"inline-block text-gray-500 text-sm mr-1 border px-2 mb-2"},"···"))]),e.createElementVNode("view",{class:"flex flex-wrap justify-around"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(t=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>{return a=t,void uni.navigateTo({url:`/pages/album/album?type=4&id=${a.id}&rank=${a.rank||0}`});var a},class:"w-28",key:t.id},[e.createElementVNode("image",{class:"w-28 h-28 rounded","lazy-load":!0,src:t.pic},null,8,["src"]),e.createElementVNode("text",{class:"text-xs inline-block leading-5 h-10 overflow-hidden"},e.toDisplayString(t.name),1)],8,["onClick"])))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(3-a.value.length%3,(t=>(e.openBlock(),e.createElementBlock("view",{class:"w-28 empty",key:t})))),128))])],32))}}),[["__scopeId","data-v-3810c301"]]);const ue={setup(t){const a=e.ref(0),i=e.computed((()=>{switch(a.value){case 0:default:return q;case 1:return Z;case 2:return ae;case 3:return oe;case 4:return de}})),n=e=>{uni.navigateTo({url:`/pages/search/search?keywords=${e.detail.value}`})};return(t,l)=>(e.openBlock(),e.createElementBlock("view",{class:"content flex flex-col h-full"},[e.createElementVNode("view",{class:"flex items-center shadow-sm shadow-inner w-full pl-2 py-2"},[e.createElementVNode("text",{class:"iconfont text-2xl icon-yuyin linear-text px-2"}),e.createElementVNode("input",{"confirm-type":"搜索",onConfirm:n,class:"flex-1 rounded-2xl bg-gradient-to-r from-blue-100 to-purple-100 px-2 text-sm h-8",placeholder:"请输入歌曲名"},null,32),e.createElementVNode("text",{class:"iconfont text-2xl linear-text icon-tinggeshiqu text-blue-500 px-2"})]),e.createElementVNode("scroll-view",{"scroll-x":"true","show-scrollbar":!1,class:"hide-scroll-bar whitespace-nowrap flex leading-10 text-gray-600"},[e.createElementVNode("view",{onClick:l[0]||(l[0]=e=>a.value=0),class:e.normalizeClass([{"linear-text font-bold border-b-2  border-purple-500":0===a.value},"inline-block text-base mx-3"])},"我的",2),e.createElementVNode("view",{onClick:l[1]||(l[1]=e=>a.value=1),class:e.normalizeClass([{"linear-text font-bold border-b-2 border-purple-500":1===a.value},"inline-block text-base mx-3"])},"网易云音乐",2),e.createElementVNode("view",{onClick:l[2]||(l[2]=e=>a.value=2),class:e.normalizeClass([{"linear-text font-bold border-b-2 border-purple-500":2===a.value},"inline-block text-base mx-3"])},"QQ音乐",2),e.createElementVNode("view",{onClick:l[3]||(l[3]=e=>a.value=3),class:e.normalizeClass([{"linear-text font-bold border-b-2 border-purple-500":3===a.value},"inline-block text-base mx-3"])},"酷我音乐",2),e.createElementVNode("view",{onClick:l[4]||(l[4]=e=>a.value=4),class:e.normalizeClass([{"linear-text font-bold border-b-2 border-purple-500":4===a.value},"inline-block text-base mx-3"])},"酷狗音乐",2)]),e.createElementVNode("view",{class:"flex-1 overflow-hidden pb-12"},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(i)),{key:a.value}))]),e.createVNode(Y)]))}};var me={id:"2852637",name:"uniui图标库",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]};var he=H({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data:()=>({icons:me.glyphs}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?unescape(`%u${e.unicode}`):""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e}},methods:{_onClick(){this.$emit("click")}}},[["render",function(t,a,i,n,l,o){return e.openBlock(),e.createElementBlock("text",{style:e.normalizeStyle({color:i.color,"font-size":o.iconSize}),class:e.normalizeClass(["uni-icons",["uniui-"+i.type,i.customPrefix,i.customPrefix?i.type:""]]),onClick:a[0]||(a[0]=(...e)=>o._onClick&&o._onClick(...e))},null,6)}],["__scopeId","data-v-4b2cddd4"]]);class pe{constructor({date:e,selected:t,startDate:a,endDate:i,range:n}={}){this.date=this.getDate(new Date),this.selected=t||[],this.startDate=a,this.endDate=i,this.range=n,this.cleanMultipleStatus(),this.weeks={},this.lastHover=!1}setDate(e){this.selectDate=this.getDate(e),this._getWeek(this.selectDate.fullDate)}cleanMultipleStatus(){this.multipleStatus={before:"",after:"",data:[]}}resetSatrtDate(e){this.startDate=e}resetEndDate(e){this.endDate=e}getDate(e,t=0,a="day"){e||(e=new Date),"object"!=typeof e&&(e=e.replace(/-/g,"/"));const i=new Date(e);switch(a){case"day":i.setDate(i.getDate()+t);break;case"month":31===i.getDate()?i.setDate(i.getDate()+t):i.setMonth(i.getMonth()+t);break;case"year":i.setFullYear(i.getFullYear()+t)}const n=i.getFullYear(),l=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,o=i.getDate()<10?"0"+i.getDate():i.getDate();return{fullDate:n+"-"+l+"-"+o,year:n,month:l,date:o,day:i.getDay()}}_getLastMonthDays(e,t){let a=[];for(let i=e;i>0;i--){const e=new Date(t.year,t.month-1,1-i).getDate();a.push({date:e,month:t.month-1,disable:!0})}return a}_currentMonthDys(e,t){let a=[],i=this.date.fullDate;for(let n=1;n<=e;n++){let e=t.year+"-"+(t.month,t.month+"-")+(n<10?"0"+n:n),l=i===e,o=this.selected&&this.selected.find((t=>{if(this.dateEqual(e,t.date))return t})),s=!0,r=!0;this.startDate&&(s=this.dateCompare(this.startDate,e)),this.endDate&&(r=this.dateCompare(e,this.endDate));let c=this.multipleStatus.data,d=!1,u=-1;this.range&&(c&&(u=c.findIndex((t=>this.dateEqual(t,e)))),-1!==u&&(d=!0));let m={fullDate:e,year:t.year,date:n,multiple:!!this.range&&d,beforeMultiple:this.isLogicBefore(e,this.multipleStatus.before,this.multipleStatus.after),afterMultiple:this.isLogicAfter(e,this.multipleStatus.before,this.multipleStatus.after),month:t.month,disable:!(s&&r),isDay:l,userChecked:!1};o&&(m.extraInfo=o),a.push(m)}return a}_getNextMonthDays(e,t){let a=[];for(let i=1;i<e+1;i++)a.push({date:i,month:Number(t.month)+1,disable:!0});return a}getInfo(e){e||(e=new Date);return this.canlender.find((t=>t.fullDate===this.getDate(e).fullDate))}dateCompare(e,t){return(e=new Date(e.replace("-","/").replace("-","/")))<=(t=new Date(t.replace("-","/").replace("-","/")))}dateEqual(e,t){return e=new Date(e.replace("-","/").replace("-","/")),t=new Date(t.replace("-","/").replace("-","/")),e.getTime()-t.getTime()==0}isLogicBefore(e,t,a){let i=t;return t&&a&&(i=this.dateCompare(t,a)?t:a),this.dateEqual(i,e)}isLogicAfter(e,t,a){let i=a;return t&&a&&(i=this.dateCompare(t,a)?a:t),this.dateEqual(i,e)}geDateAll(e,t){var a=[],i=e.split("-"),n=t.split("-"),l=new Date;l.setFullYear(i[0],i[1]-1,i[2]);var o=new Date;o.setFullYear(n[0],n[1]-1,n[2]);for(var s=l.getTime()-864e5,r=o.getTime()-864e5,c=s;c<=r;)c+=864e5,a.push(this.getDate(new Date(parseInt(c))).fullDate);return a}setMultiple(e){let{before:t,after:a}=this.multipleStatus;if(this.range){if(t&&a){if(!this.lastHover)return void(this.lastHover=!0);this.multipleStatus.before=e,this.multipleStatus.after="",this.multipleStatus.data=[],this.multipleStatus.fulldate="",this.lastHover=!1}else t?(this.multipleStatus.after=e,this.dateCompare(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before),this.lastHover=!0):(this.multipleStatus.before=e,this.lastHover=!1);this._getWeek(e)}}setHoverMultiple(e){let{before:t,after:a}=this.multipleStatus;this.range&&(this.lastHover||(t?(this.multipleStatus.after=e,this.dateCompare(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before)):this.multipleStatus.before=e,this._getWeek(e)))}setDefaultMultiple(e,t){this.multipleStatus.before=e,this.multipleStatus.after=t,e&&t&&(this.dateCompare(e,t)?(this.multipleStatus.data=this.geDateAll(e,t),this._getWeek(t)):(this.multipleStatus.data=this.geDateAll(t,e),this._getWeek(e)))}_getWeek(e){const{fullDate:t,year:a,month:i,date:n,day:l}=this.getDate(e);let o=new Date(a,i-1,1).getDay(),s=new Date(a,i,0).getDate(),r={lastMonthDays:this._getLastMonthDays(o,this.getDate(e)),currentMonthDys:this._currentMonthDys(s,this.getDate(e)),nextMonthDays:[],weeks:[]},c=[];const d=42-(r.lastMonthDays.length+r.currentMonthDys.length);r.nextMonthDays=this._getNextMonthDays(d,this.getDate(e)),c=c.concat(r.lastMonthDays,r.currentMonthDys,r.nextMonthDays);let u={};for(let m=0;m<c.length;m++)m%7==0&&(u[parseInt(m/7)]=new Array(7)),u[parseInt(m/7)][m%7]=c[m];this.canlender=c,this.weeks=u}}var fe=H({props:{weeks:{type:Object,default:()=>({})},calendar:{type:Object,default:()=>({})},selected:{type:Array,default:()=>[]},lunar:{type:Boolean,default:!1},checkHover:{type:Boolean,default:!1}},methods:{choiceDate(e){this.$emit("change",e)},handleMousemove(e){this.$emit("handleMouse",e)}}},[["render",function(t,a,i,n,l,o){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-calendar-item__weeks-box",{"uni-calendar-item--disable":i.weeks.disable,"uni-calendar-item--before-checked-x":i.weeks.beforeMultiple,"uni-calendar-item--multiple":i.weeks.multiple,"uni-calendar-item--after-checked-x":i.weeks.afterMultiple}]),onClick:a[0]||(a[0]=e=>o.choiceDate(i.weeks)),onMouseenter:a[1]||(a[1]=e=>o.handleMousemove(i.weeks))},[e.createElementVNode("view",{class:e.normalizeClass(["uni-calendar-item__weeks-box-item",{"uni-calendar-item--checked":i.calendar.fullDate===i.weeks.fullDate&&(i.calendar.userChecked||!i.checkHover),"uni-calendar-item--checked-range-text":i.checkHover,"uni-calendar-item--before-checked":i.weeks.beforeMultiple,"uni-calendar-item--multiple":i.weeks.multiple,"uni-calendar-item--after-checked":i.weeks.afterMultiple,"uni-calendar-item--disable":i.weeks.disable}])},[i.selected&&i.weeks.extraInfo?(e.openBlock(),e.createElementBlock("text",{key:0,class:"uni-calendar-item__weeks-box-circle"})):e.createCommentVNode("",!0),e.createElementVNode("text",{class:"uni-calendar-item__weeks-box-text uni-calendar-item__weeks-box-text-disable uni-calendar-item--checked-text"},e.toDisplayString(i.weeks.date),1)],2),e.createElementVNode("view",{class:e.normalizeClass({"uni-calendar-item--isDay":i.weeks.isDay})},null,2)],34)}],["__scopeId","data-v-3d1b5246"]]);const ge=Array.isArray,ke=["{","}"];const ve=/^(?:\d)+/,ye=/^(?:\w)+/;const _e="zh-Hans",we="zh-Hant",be="en",xe=Object.prototype.hasOwnProperty,De=(e,t)=>xe.call(e,t),Se=new class{constructor(){this._caches=Object.create(null)}interpolate(e,t,a=ke){if(!t)return[e];let i=this._caches[e];return i||(i=function(e,[t,a]){const i=[];let n=0,l="";for(;n<e.length;){let o=e[n++];if(o===t){l&&i.push({type:"text",value:l}),l="";let t="";for(o=e[n++];void 0!==o&&o!==a;)t+=o,o=e[n++];const s=o===a,r=ve.test(t)?"list":s&&ye.test(t)?"named":"unknown";i.push({value:t,type:r})}else l+=o}return l&&i.push({type:"text",value:l}),i}(e,a),this._caches[e]=i),function(e,t){const a=[];let i=0;const n=ge(t)?"list":(l=t,null!==l&&"object"==typeof l?"named":"unknown");var l;if("unknown"===n)return a;for(;i<e.length;){const l=e[i];switch(l.type){case"text":a.push(l.value);break;case"list":a.push(t[parseInt(l.value,10)]);break;case"named":"named"===n&&a.push(t[l.value])}i++}return a}(i,t)}};function Ee(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if("chinese"===(e=e.toLowerCase()))return _e;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?_e:e.indexOf("-hant")>-1?we:(a=e,["-tw","-hk","-mo","-cht"].find((e=>-1!==a.indexOf(e)))?we:_e);var a;const i=function(e,t){return t.find((t=>0===e.indexOf(t)))}(e,[be,"fr","es"]);return i||void 0}class Ce{constructor({locale:e,fallbackLocale:t,messages:a,watcher:i,formater:n}){this.locale=be,this.fallbackLocale=be,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=n||Se,this.messages=a||{},this.setLocale(e||be),i&&this.watchLocale(i)}setLocale(e){const t=this.locale;this.locale=Ee(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach((e=>{e(this.locale,t)}))}getLocale(){return this.locale}watchLocale(e){const t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,a=!0){const i=this.messages[e];i?a?Object.assign(i,t):Object.keys(t).forEach((e=>{De(i,e)||(i[e]=t[e])})):this.messages[e]=t}f(e,t,a){return this.formater.interpolate(e,t,a).join("")}t(e,t,a){let i=this.message;return"string"==typeof t?(t=Ee(t,this.messages))&&(i=this.messages[t]):a=t,De(i,e)?this.formater.interpolate(i[e],a).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}}function Te(e,t={},a,i){"string"!=typeof e&&([e,t]=[t,e]),"string"!=typeof e&&(e="undefined"!=typeof uni&&uni.getLocale?uni.getLocale():"undefined"!=typeof global&&global.getLocale?global.getLocale():be),"string"!=typeof a&&(a="undefined"!=typeof __uniConfig&&__uniConfig.fallbackLocale||be);const n=new Ce({locale:e,fallbackLocale:a,messages:t,watcher:i});let l=(e,t)=>{if("function"!=typeof getApp)l=function(e,t){return n.t(e,t)};else{let e=!1;l=function(t,a){const i=getApp().$vm;return i&&(i.$locale,e||(e=!0,function(e,t){e.$watchLocale?e.$watchLocale((e=>{t.setLocale(e)})):e.$watch((()=>e.$locale),(e=>{t.setLocale(e)}))}(i,n))),n.t(t,a)}}return l(e,t)};return{i18n:n,f:(e,t,a)=>n.f(e,t,a),t:(e,t)=>l(e,t),add:(e,t,a=!0)=>n.add(e,t,a),watch:e=>n.watchLocale(e),getLocale:()=>n.getLocale(),setLocale:e=>n.setLocale(e)}}var Ve={en:{"uni-datetime-picker.selectDate":"select date","uni-datetime-picker.selectTime":"select time","uni-datetime-picker.selectDateTime":"select datetime","uni-datetime-picker.startDate":"start date","uni-datetime-picker.endDate":"end date","uni-datetime-picker.startTime":"start time","uni-datetime-picker.endTime":"end time","uni-datetime-picker.ok":"ok","uni-datetime-picker.clear":"clear","uni-datetime-picker.cancel":"cancel","uni-calender.MON":"MON","uni-calender.TUE":"TUE","uni-calender.WED":"WED","uni-calender.THU":"THU","uni-calender.FRI":"FRI","uni-calender.SAT":"SAT","uni-calender.SUN":"SUN"},"zh-Hans":{"uni-datetime-picker.selectDate":"选择日期","uni-datetime-picker.selectTime":"选择时间","uni-datetime-picker.selectDateTime":"选择日期时间","uni-datetime-picker.startDate":"开始日期","uni-datetime-picker.endDate":"结束日期","uni-datetime-picker.startTime":"开始时间","uni-datetime-picker.endTime":"结束时间","uni-datetime-picker.ok":"确定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六"},"zh-Hant":{"uni-datetime-picker.selectDate":"選擇日期","uni-datetime-picker.selectTime":"選擇時間","uni-datetime-picker.selectDateTime":"選擇日期時間","uni-datetime-picker.startDate":"開始日期","uni-datetime-picker.endDate":"結束日期","uni-datetime-picker.startTime":"開始时间","uni-datetime-picker.endTime":"結束时间","uni-datetime-picker.ok":"確定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六"}};const{t:Ne}=Te(Ve);var Be=H({name:"UniDatetimePicker",components:{},data:()=>({indicatorStyle:"height: 50px;",visible:!1,fixNvueBug:{},dateShow:!0,timeShow:!0,title:"日期和时间",time:"",year:1920,month:0,day:0,hour:0,minute:0,second:0,startYear:1920,startMonth:1,startDay:1,startHour:0,startMinute:0,startSecond:0,endYear:2120,endMonth:12,endDay:31,endHour:23,endMinute:59,endSecond:59}),props:{type:{type:String,default:"datetime"},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},disabled:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0},hideSecond:{type:[Boolean,String],default:!1}},watch:{value:{handler(e,t){e?(this.parseValue(this.fixIosDateFormat(e)),this.initTime(!1)):(this.time="",this.parseValue(Date.now()))},immediate:!0},type:{handler(e){"date"===e?(this.dateShow=!0,this.timeShow=!1,this.title="日期"):"time"===e?(this.dateShow=!1,this.timeShow=!0,this.title="时间"):(this.dateShow=!0,this.timeShow=!0,this.title="日期和时间")},immediate:!0},start:{handler(e){this.parseDatetimeRange(this.fixIosDateFormat(e),"start")},immediate:!0},end:{handler(e){this.parseDatetimeRange(this.fixIosDateFormat(e),"end")},immediate:!0},months(e){this.checkValue("month",this.month,e)},days(e){this.checkValue("day",this.day,e)},hours(e){this.checkValue("hour",this.hour,e)},minutes(e){this.checkValue("minute",this.minute,e)},seconds(e){this.checkValue("second",this.second,e)}},computed:{years(){return this.getCurrentRange("year")},months(){return this.getCurrentRange("month")},days(){return this.getCurrentRange("day")},hours(){return this.getCurrentRange("hour")},minutes(){return this.getCurrentRange("minute")},seconds(){return this.getCurrentRange("second")},ymd(){return[this.year-this.minYear,this.month-this.minMonth,this.day-this.minDay]},hms(){return[this.hour-this.minHour,this.minute-this.minMinute,this.second-this.minSecond]},currentDateIsStart(){return this.year===this.startYear&&this.month===this.startMonth&&this.day===this.startDay},currentDateIsEnd(){return this.year===this.endYear&&this.month===this.endMonth&&this.day===this.endDay},minYear(){return this.startYear},maxYear(){return this.endYear},minMonth(){return this.year===this.startYear?this.startMonth:1},maxMonth(){return this.year===this.endYear?this.endMonth:12},minDay(){return this.year===this.startYear&&this.month===this.startMonth?this.startDay:1},maxDay(){return this.year===this.endYear&&this.month===this.endMonth?this.endDay:this.daysInMonth(this.year,this.month)},minHour(){return"datetime"===this.type?this.currentDateIsStart?this.startHour:0:"time"===this.type?this.startHour:void 0},maxHour(){return"datetime"===this.type?this.currentDateIsEnd?this.endHour:23:"time"===this.type?this.endHour:void 0},minMinute(){return"datetime"===this.type?this.currentDateIsStart&&this.hour===this.startHour?this.startMinute:0:"time"===this.type?this.hour===this.startHour?this.startMinute:0:void 0},maxMinute(){return"datetime"===this.type?this.currentDateIsEnd&&this.hour===this.endHour?this.endMinute:59:"time"===this.type?this.hour===this.endHour?this.endMinute:59:void 0},minSecond(){return"datetime"===this.type?this.currentDateIsStart&&this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0:"time"===this.type?this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0:void 0},maxSecond(){return"datetime"===this.type?this.currentDateIsEnd&&this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59:"time"===this.type?this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59:void 0},selectTimeText:()=>Ne("uni-datetime-picker.selectTime"),okText:()=>Ne("uni-datetime-picker.ok"),clearText:()=>Ne("uni-datetime-picker.clear"),cancelText:()=>Ne("uni-datetime-picker.cancel")},mounted(){},methods:{lessThanTen:e=>e<10?"0"+e:e,parseTimeType(e){if(e){let t=e.split(":");this.hour=Number(t[0]),this.minute=Number(t[1]),this.second=Number(t[2])}},initPickerValue(e){let t=null;e?t=this.compareValueWithStartAndEnd(e,this.start,this.end):(t=Date.now(),t=this.compareValueWithStartAndEnd(t,this.start,this.end)),this.parseValue(t)},compareValueWithStartAndEnd(e,t,a){let i=null;return e=this.superTimeStamp(e),t=this.superTimeStamp(t),a=this.superTimeStamp(a),i=t&&a?e<t?new Date(t):e>a?new Date(a):new Date(e):t&&!a?t<=e?new Date(e):new Date(t):!t&&a?e<=a?new Date(e):new Date(a):new Date(e),i},superTimeStamp(e){let t="";if("time"===this.type&&e&&"string"==typeof e){const e=new Date;t=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "}return Number(e)&&NaN!==typeof e&&(e=parseInt(e),t=0),this.createTimeStamp(t+e)},parseValue(e){if(e){if("time"===this.type&&"string"==typeof e)this.parseTimeType(e);else{let t=null;t=new Date(e),"time"!==this.type&&(this.year=t.getFullYear(),this.month=t.getMonth()+1,this.day=t.getDate()),"date"!==this.type&&(this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds())}this.hideSecond&&(this.second=0)}},parseDatetimeRange(e,t){if(!e)return"start"===t&&(this.startYear=1920,this.startMonth=1,this.startDay=1,this.startHour=0,this.startMinute=0,this.startSecond=0),void("end"===t&&(this.endYear=2120,this.endMonth=12,this.endDay=31,this.endHour=23,this.endMinute=59,this.endSecond=59));if("time"===this.type){const a=e.split(":");this[t+"Hour"]=Number(a[0]),this[t+"Minute"]=Number(a[1]),this[t+"Second"]=Number(a[2])}else{if(!e)return void("start"===t?this.startYear=this.year-60:this.endYear=this.year+60);Number(e)&&NaN!==Number(e)&&(e=parseInt(e));const a=/[0-9]:[0-9]/;"datetime"!==this.type||"end"!==t||"string"!=typeof e||a.test(e)||(e+=" 23:59:59");const i=new Date(e);this[t+"Year"]=i.getFullYear(),this[t+"Month"]=i.getMonth()+1,this[t+"Day"]=i.getDate(),"datetime"===this.type&&(this[t+"Hour"]=i.getHours(),this[t+"Minute"]=i.getMinutes(),this[t+"Second"]=i.getSeconds())}},getCurrentRange(e){const t=[];for(let a=this["min"+this.capitalize(e)];a<=this["max"+this.capitalize(e)];a++)t.push(a);return t},capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),checkValue(e,t,a){-1===a.indexOf(t)&&(this[e]=a[0])},daysInMonth:(e,t)=>new Date(e,t,0).getDate(),fixIosDateFormat:e=>("string"==typeof e&&(e=e.replace(/-/g,"/")),e),createTimeStamp(e){if(e)return"number"==typeof e?e:(e=e.replace(/-/g,"/"),"date"===this.type&&(e+=" 00:00:00"),Date.parse(e))},createDomSting(){const e=this.year+"-"+this.lessThanTen(this.month)+"-"+this.lessThanTen(this.day);let t=this.lessThanTen(this.hour)+":"+this.lessThanTen(this.minute);return this.hideSecond||(t=t+":"+this.lessThanTen(this.second)),"date"===this.type?e:"time"===this.type?t:e+" "+t},initTime(e=!0){this.time=this.createDomSting(),e&&("timestamp"===this.returnType&&"time"!==this.type?(this.$emit("change",this.createTimeStamp(this.time)),this.$emit("input",this.createTimeStamp(this.time)),this.$emit("update:modelValue",this.createTimeStamp(this.time))):(this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time)))},bindDateChange(e){const t=e.detail.value;this.year=this.years[t[0]],this.month=this.months[t[1]],this.day=this.days[t[2]]},bindTimeChange(e){const t=e.detail.value;this.hour=this.hours[t[0]],this.minute=this.minutes[t[1]],this.second=this.seconds[t[2]]},initTimePicker(){if(this.disabled)return;const e=this.fixIosDateFormat(this.value);this.initPickerValue(e),this.visible=!this.visible},tiggerTimePicker(e){this.visible=!this.visible},clearTime(){this.time="",this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time),this.tiggerTimePicker()},setTime(){this.initTime(),this.tiggerTimePicker()}}},[["render",function(t,a,i,n,l,o){return e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker"},[e.createElementVNode("view",{onClick:a[0]||(a[0]=(...e)=>o.initTimePicker&&o.initTimePicker(...e))},[e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-datetime-picker-timebox-pointer",{"uni-datetime-picker-disabled":i.disabled,"uni-datetime-picker-timebox":i.border}])},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(l.time),1),l.time?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-datetime-picker-time"},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(o.selectTimeText),1)]))],2)]),!0)]),l.visible?(e.openBlock(),e.createElementBlock("view",{key:0,id:"mask",class:"uni-datetime-picker-mask",onClick:a[1]||(a[1]=(...e)=>o.tiggerTimePicker&&o.tiggerTimePicker(...e))})):e.createCommentVNode("",!0),l.visible?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["uni-datetime-picker-popup",[l.dateShow&&l.timeShow?"":"fix-nvue-height"]]),style:e.normalizeStyle(l.fixNvueBug)},[e.createElementVNode("view",{class:"uni-title"},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(o.selectTimeText),1)]),l.dateShow?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-datetime-picker__container-box"},[e.createElementVNode("picker-view",{class:"uni-datetime-picker-view","indicator-style":l.indicatorStyle,value:o.ymd,onChange:a[2]||(a[2]=(...e)=>o.bindDateChange&&o.bindDateChange(...e))},[e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.years,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(o.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.months,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(o.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.days,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(o.lessThanTen(t)),1)])))),128))])],40,["indicator-style","value"]),e.createElementVNode("text",{class:"uni-datetime-picker-sign sign-left"},"-"),e.createElementVNode("text",{class:"uni-datetime-picker-sign sign-right"},"-")])):e.createCommentVNode("",!0),l.timeShow?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-datetime-picker__container-box"},[e.createElementVNode("picker-view",{class:e.normalizeClass(["uni-datetime-picker-view",[i.hideSecond?"time-hide-second":""]]),"indicator-style":l.indicatorStyle,value:o.hms,onChange:a[3]||(a[3]=(...e)=>o.bindTimeChange&&o.bindTimeChange(...e))},[e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.hours,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(o.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.minutes,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(o.lessThanTen(t)),1)])))),128))]),i.hideSecond?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("picker-view-column",{key:0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.seconds,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(o.lessThanTen(t)),1)])))),128))]))],42,["indicator-style","value"]),e.createElementVNode("text",{class:e.normalizeClass(["uni-datetime-picker-sign",[i.hideSecond?"sign-center":"sign-left"]])},":",2),i.hideSecond?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("text",{key:0,class:"uni-datetime-picker-sign sign-right"},":"))])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-datetime-picker-btn"},[e.createElementVNode("view",{onClick:a[4]||(a[4]=(...e)=>o.clearTime&&o.clearTime(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(o.clearText),1)]),e.createElementVNode("view",{class:"uni-datetime-picker-btn-group"},[e.createElementVNode("view",{class:"uni-datetime-picker-cancel",onClick:a[5]||(a[5]=(...e)=>o.tiggerTimePicker&&o.tiggerTimePicker(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(o.cancelText),1)]),e.createElementVNode("view",{onClick:a[6]||(a[6]=(...e)=>o.setTime&&o.setTime(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(o.okText),1)])])])],6)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-c14056ce"]]);const{t:Me}=Te(Ve);var Ie=H({components:{calendarItem:fe,timePicker:Be},props:{date:{type:String,default:""},defTime:{type:[String,Object],default:""},selectableTimes:{type:[Object],default:()=>({})},selected:{type:Array,default:()=>[]},lunar:{type:Boolean,default:!1},startDate:{type:String,default:""},endDate:{type:String,default:""},range:{type:Boolean,default:!1},typeHasTime:{type:Boolean,default:!1},insert:{type:Boolean,default:!0},showMonth:{type:Boolean,default:!0},clearDate:{type:Boolean,default:!0},left:{type:Boolean,default:!0},right:{type:Boolean,default:!0},checkHover:{type:Boolean,default:!0},hideSecond:{type:[Boolean],default:!1},pleStatus:{type:Object,default:()=>({before:"",after:"",data:[],fulldate:""})}},data:()=>({show:!1,weeks:[],calendar:{},nowDate:"",aniMaskShow:!1,firstEnter:!0,time:"",timeRange:{startTime:"",endTime:""},tempSingleDate:"",tempRange:{before:"",after:""}}),watch:{date:{immediate:!0,handler(e,t){this.range||(this.tempSingleDate=e,setTimeout((()=>{this.init(e)}),100))}},defTime:{immediate:!0,handler(e,t){this.range?(this.timeRange.startTime=e.start,this.timeRange.endTime=e.end):this.time=e}},startDate(e){this.cale.resetSatrtDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks},endDate(e){this.cale.resetEndDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks},selected(e){this.cale.setSelectInfo(this.nowDate.fullDate,e),this.weeks=this.cale.weeks},pleStatus:{immediate:!0,handler(e,t){const{before:a,after:i,fulldate:n,which:l}=e;this.tempRange.before=a,this.tempRange.after=i,setTimeout((()=>{if(n)if(this.cale.setHoverMultiple(n),a&&i){if(this.cale.lastHover=!0,this.rangeWithinMonth(i,a))return;this.setDate(a)}else this.cale.setMultiple(n),this.setDate(this.nowDate.fullDate),this.calendar.fullDate="",this.cale.lastHover=!1;else this.cale.setDefaultMultiple(a,i),"left"===l?(this.setDate(a),this.weeks=this.cale.weeks):(this.setDate(i),this.weeks=this.cale.weeks),this.cale.lastHover=!0}),16)}}},computed:{reactStartTime(){return(this.range?this.tempRange.before:this.calendar.fullDate)===this.startDate?this.selectableTimes.start:""},reactEndTime(){return(this.range?this.tempRange.after:this.calendar.fullDate)===this.endDate?this.selectableTimes.end:""},selectDateText:()=>Me("uni-datetime-picker.selectDate"),startDateText(){return this.startPlaceholder||Me("uni-datetime-picker.startDate")},endDateText(){return this.endPlaceholder||Me("uni-datetime-picker.endDate")},okText:()=>Me("uni-datetime-picker.ok"),monText:()=>Me("uni-calender.MON"),TUEText:()=>Me("uni-calender.TUE"),WEDText:()=>Me("uni-calender.WED"),THUText:()=>Me("uni-calender.THU"),FRIText:()=>Me("uni-calender.FRI"),SATText:()=>Me("uni-calender.SAT"),SUNText:()=>Me("uni-calender.SUN")},created(){this.cale=new pe({selected:this.selected,startDate:this.startDate,endDate:this.endDate,range:this.range}),this.init(this.date)},methods:{leaveCale(){this.firstEnter=!0},handleMouse(e){if(e.disable)return;if(this.cale.lastHover)return;let{before:t,after:a}=this.cale.multipleStatus;t&&(this.calendar=e,this.cale.setHoverMultiple(this.calendar.fullDate),this.weeks=this.cale.weeks,this.firstEnter&&(this.$emit("firstEnterCale",this.cale.multipleStatus),this.firstEnter=!1))},rangeWithinMonth(e,t){const[a,i]=e.split("-"),[n,l]=t.split("-");return a===n&&i===l},clean(){this.close()},clearCalender(){this.range?(this.timeRange.startTime="",this.timeRange.endTime="",this.tempRange.before="",this.tempRange.after="",this.cale.multipleStatus.before="",this.cale.multipleStatus.after="",this.cale.multipleStatus.data=[],this.cale.lastHover=!1):(this.time="",this.tempSingleDate=""),this.calendar.fullDate="",this.setDate()},bindDateChange(e){const t=e.detail.value+"-1";this.init(t)},init(e){this.cale.setDate(e),this.weeks=this.cale.weeks,this.nowDate=this.calendar=this.cale.getInfo(e)},open(){this.clearDate&&!this.insert&&(this.cale.cleanMultipleStatus(),this.init(this.date)),this.show=!0,this.$nextTick((()=>{setTimeout((()=>{this.aniMaskShow=!0}),50)}))},close(){this.aniMaskShow=!1,this.$nextTick((()=>{setTimeout((()=>{this.show=!1,this.$emit("close")}),300)}))},confirm(){this.setEmit("confirm"),this.close()},change(){this.insert&&this.setEmit("change")},monthSwitch(){let{year:e,month:t}=this.nowDate;this.$emit("monthSwitch",{year:e,month:Number(t)})},setEmit(e){let{year:t,month:a,date:i,fullDate:n,lunar:l,extraInfo:o}=this.calendar;this.$emit(e,{range:this.cale.multipleStatus,year:t,month:a,date:i,time:this.time,timeRange:this.timeRange,fulldate:n,lunar:l,extraInfo:o||{}})},choiceDate(e){e.disable||(this.calendar=e,this.calendar.userChecked=!0,this.cale.setMultiple(this.calendar.fullDate,!0),this.weeks=this.cale.weeks,this.tempSingleDate=this.calendar.fullDate,this.tempRange.before=this.cale.multipleStatus.before,this.tempRange.after=this.cale.multipleStatus.after,this.change())},backtoday(){let e=this.cale.getDate(new Date).fullDate;this.init(e),this.change()},dateCompare:(e,t)=>(e=new Date(e.replace("-","/").replace("-","/")))<=(t=new Date(t.replace("-","/").replace("-","/"))),pre(){const e=this.cale.getDate(this.nowDate.fullDate,-1,"month").fullDate;this.setDate(e),this.monthSwitch()},next(){const e=this.cale.getDate(this.nowDate.fullDate,1,"month").fullDate;this.setDate(e),this.monthSwitch()},setDate(e){this.cale.setDate(e),this.weeks=this.cale.weeks,this.nowDate=this.cale.getInfo(e)}}},[["render",function(t,a,i,n,l,o){const s=e.resolveComponent("calendar-item"),r=e.resolveComponent("time-picker"),d=c(e.resolveDynamicComponent("uni-icons"),he);return e.openBlock(),e.createElementBlock("view",{class:"uni-calendar",onMouseleave:a[9]||(a[9]=(...e)=>o.leaveCale&&o.leaveCale(...e))},[!i.insert&&l.show?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["uni-calendar__mask",{"uni-calendar--mask-show":l.aniMaskShow}]),onClick:a[0]||(a[0]=(...e)=>o.clean&&o.clean(...e))},null,2)):e.createCommentVNode("",!0),i.insert||l.show?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["uni-calendar__content",{"uni-calendar--fixed":!i.insert,"uni-calendar--ani-show":l.aniMaskShow,"uni-calendar__content-mobile":l.aniMaskShow}])},[e.createElementVNode("view",{class:e.normalizeClass(["uni-calendar__header",{"uni-calendar__header-mobile":!i.insert}])},[i.left?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-calendar__header-btn-box",onClick:a[1]||(a[1]=e.withModifiers(((...e)=>o.pre&&o.pre(...e)),["stop"]))},[e.createElementVNode("view",{class:"uni-calendar__header-btn uni-calendar--left"})])):e.createCommentVNode("",!0),e.createElementVNode("picker",{mode:"date",value:i.date,fields:"month",onChange:a[2]||(a[2]=(...e)=>o.bindDateChange&&o.bindDateChange(...e))},[e.createElementVNode("text",{class:"uni-calendar__header-text"},e.toDisplayString((l.nowDate.year||"")+" 年 "+(l.nowDate.month||"")+" 月"),1)],40,["value"]),i.right?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-calendar__header-btn-box",onClick:a[3]||(a[3]=e.withModifiers(((...e)=>o.next&&o.next(...e)),["stop"]))},[e.createElementVNode("view",{class:"uni-calendar__header-btn uni-calendar--right"})])):e.createCommentVNode("",!0),i.insert?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:2,class:"dialog-close",onClick:a[4]||(a[4]=(...e)=>o.clean&&o.clean(...e))},[e.createElementVNode("view",{class:"dialog-close-plus","data-id":"close"}),e.createElementVNode("view",{class:"dialog-close-plus dialog-close-rotate","data-id":"close"})]))],2),e.createElementVNode("view",{class:"uni-calendar__box"},[i.showMonth?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-calendar__box-bg"},[e.createElementVNode("text",{class:"uni-calendar__box-bg-text"},e.toDisplayString(l.nowDate.month),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-calendar__weeks",style:{"padding-bottom":"7px"}},[e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(o.SUNText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(o.monText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(o.TUEText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(o.WEDText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(o.THUText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(o.FRIText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(o.SATText),1)])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.weeks,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-calendar__weeks",key:a},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-calendar__weeks-item",key:a},[e.createVNode(s,{class:"uni-calendar-item--hook",weeks:t,calendar:l.calendar,selected:i.selected,lunar:i.lunar,checkHover:i.range,onChange:o.choiceDate,onHandleMouse:o.handleMouse},null,8,["weeks","calendar","selected","lunar","checkHover","onChange","onHandleMouse"])])))),128))])))),128))]),i.insert||i.range||!i.typeHasTime?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-changed uni-calendar--fixed-top",style:{padding:"0 80px"}},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(l.tempSingleDate?l.tempSingleDate:o.selectDateText),1),e.createVNode(r,{type:"time",start:o.reactStartTime,end:o.reactEndTime,modelValue:l.time,"onUpdate:modelValue":a[5]||(a[5]=e=>l.time=e),disabled:!l.tempSingleDate,border:!1,"hide-second":i.hideSecond,class:"time-picker-style"},null,8,["start","end","modelValue","disabled","hide-second"])])),!i.insert&&i.range&&i.typeHasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-changed uni-calendar--fixed-top"},[e.createElementVNode("view",{class:"uni-date-changed--time-start"},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(l.tempRange.before?l.tempRange.before:o.startDateText),1),e.createVNode(r,{type:"time",start:o.reactStartTime,modelValue:l.timeRange.startTime,"onUpdate:modelValue":a[6]||(a[6]=e=>l.timeRange.startTime=e),border:!1,"hide-second":i.hideSecond,disabled:!l.tempRange.before,class:"time-picker-style"},null,8,["start","modelValue","hide-second","disabled"])]),e.createVNode(d,{type:"arrowthinright",color:"#999",style:{"line-height":"50px"}}),e.createElementVNode("view",{class:"uni-date-changed--time-end"},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(l.tempRange.after?l.tempRange.after:o.endDateText),1),e.createVNode(r,{type:"time",end:o.reactEndTime,modelValue:l.timeRange.endTime,"onUpdate:modelValue":a[7]||(a[7]=e=>l.timeRange.endTime=e),border:!1,"hide-second":i.hideSecond,disabled:!l.tempRange.after,class:"time-picker-style"},null,8,["end","modelValue","hide-second","disabled"])])])):e.createCommentVNode("",!0),i.insert?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-date-changed uni-date-btn--ok"},[e.createElementVNode("view",{class:"uni-datetime-picker--btn",onClick:a[8]||(a[8]=(...e)=>o.confirm&&o.confirm(...e))},"确认")]))],2)):e.createCommentVNode("",!0)],32)}],["__scopeId","data-v-aee88a5c"]]);const{t:$e}=Te(Ve);var Le=H({name:"UniDatetimePicker",components:{calendar:Ie,timePicker:Be},data:()=>({isRange:!1,hasTime:!1,mobileRange:!1,singleVal:"",tempSingleDate:"",defSingleDate:"",time:"",caleRange:{startDate:"",startTime:"",endDate:"",endTime:""},range:{startDate:"",endDate:""},tempRange:{startDate:"",startTime:"",endDate:"",endTime:""},startMultipleStatus:{before:"",after:"",data:[],fulldate:""},endMultipleStatus:{before:"",after:"",data:[],fulldate:""},visible:!1,popup:!1,popover:null,isEmitValue:!1,isPhone:!1,isFirstShow:!0}),props:{type:{type:String,default:"datetime"},value:{type:[String,Number,Array,Date],default:""},modelValue:{type:[String,Number,Array,Date],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},placeholder:{type:String,default:""},startPlaceholder:{type:String,default:""},endPlaceholder:{type:String,default:""},rangeSeparator:{type:String,default:"-"},border:{type:[Boolean],default:!0},disabled:{type:[Boolean],default:!1},clearIcon:{type:[Boolean],default:!0},hideSecond:{type:[Boolean],default:!1}},watch:{type:{immediate:!0,handler(e,t){-1!==e.indexOf("time")?this.hasTime=!0:this.hasTime=!1,-1!==e.indexOf("range")?this.isRange=!0:this.isRange=!1}},value:{immediate:!0,handler(e,t){this.isEmitValue?this.isEmitValue=!1:this.initPicker(e)}},start:{immediate:!0,handler(e,t){if(!e)return;const{defDate:a,defTime:i}=this.parseDate(e);this.caleRange.startDate=a,this.hasTime&&(this.caleRange.startTime=i)}},end:{immediate:!0,handler(e,t){if(!e)return;const{defDate:a,defTime:i}=this.parseDate(e);this.caleRange.endDate=a,this.hasTime&&(this.caleRange.endTime=i)}}},computed:{reactStartTime(){return(this.isRange?this.tempRange.startDate:this.tempSingleDate)===this.caleRange.startDate?this.caleRange.startTime:""},reactEndTime(){return(this.isRange?this.tempRange.endDate:this.tempSingleDate)===this.caleRange.endDate?this.caleRange.endTime:""},reactMobDefTime(){const e={start:this.tempRange.startTime,end:this.tempRange.endTime};return this.isRange?e:this.time},mobSelectableTime(){return{start:this.caleRange.startTime,end:this.caleRange.endTime}},datePopupWidth(){return this.isRange?653:301},singlePlaceholderText(){return this.placeholder||("date"===this.type?this.selectDateText:$e("uni-datetime-picker.selectDateTime"))},startPlaceholderText(){return this.startPlaceholder||this.startDateText},endPlaceholderText(){return this.endPlaceholder||this.endDateText},selectDateText:()=>$e("uni-datetime-picker.selectDate"),selectTimeText:()=>$e("uni-datetime-picker.selectTime"),startDateText(){return this.startPlaceholder||$e("uni-datetime-picker.startDate")},startTimeText:()=>$e("uni-datetime-picker.startTime"),endDateText(){return this.endPlaceholder||$e("uni-datetime-picker.endDate")},endTimeText:()=>$e("uni-datetime-picker.endTime"),okText:()=>$e("uni-datetime-picker.ok"),clearText:()=>$e("uni-datetime-picker.clear"),showClearIcon(){const{clearIcon:e,disabled:t,singleVal:a,range:i}=this;return e&&!t&&(a||i.startDate&&i.endDate)}},created(){this.form=this.getForm("uniForms"),this.formItem=this.getForm("uniFormsItem")},mounted(){this.platform()},methods:{getForm(e="uniForms"){let t=this.$parent,a=t.$options.name;for(;a!==e;){if(t=t.$parent,!t)return!1;a=t.$options.name}return t},initPicker(e){if(!e||Array.isArray(e)&&!e.length)this.$nextTick((()=>{this.clear(!1)}));else if(Array.isArray(e)||this.isRange){const[t,a]=e;if(!t&&!a)return;const i=this.parseDate(t),n=this.parseDate(a),l=i.defDate,o=n.defDate;this.range.startDate=this.tempRange.startDate=l,this.range.endDate=this.tempRange.endDate=o,this.hasTime&&(this.range.startDate=i.defDate+" "+i.defTime,this.range.endDate=n.defDate+" "+n.defTime,this.tempRange.startTime=i.defTime,this.tempRange.endTime=n.defTime);const s={before:i.defDate,after:n.defDate};this.startMultipleStatus=Object.assign({},this.startMultipleStatus,s,{which:"right"}),this.endMultipleStatus=Object.assign({},this.endMultipleStatus,s,{which:"left"})}else{const{defDate:t,defTime:a}=this.parseDate(e);this.singleVal=t,this.tempSingleDate=t,this.defSingleDate=t,this.hasTime&&(this.singleVal=t+" "+a,this.time=a)}},updateLeftCale(e){const t=this.$refs.left;t.cale.setHoverMultiple(e.after),t.setDate(this.$refs.left.nowDate.fullDate)},updateRightCale(e){const t=this.$refs.right;t.cale.setHoverMultiple(e.after),t.setDate(this.$refs.right.nowDate.fullDate)},platform(){const e=uni.getSystemInfoSync();this.isPhone=e.windowWidth<=500,this.windowWidth=e.windowWidth},show(e){if(this.disabled)return;if(this.platform(),this.isPhone)return void this.$refs.mobile.open();this.popover={top:"10px"};uni.createSelectorQuery().in(this).select(".uni-date-editor").boundingClientRect((e=>{this.windowWidth-e.left<this.datePopupWidth&&(this.popover.right=0)})).exec(),setTimeout((()=>{if(this.popup=!this.popup,!this.isPhone&&this.isRange&&this.isFirstShow){this.isFirstShow=!1;const{startDate:e,endDate:t}=this.range;e&&t?this.diffDate(e,t)<30&&this.$refs.right.next():(this.$refs.right.next(),this.$refs.right.cale.lastHover=!1)}}),50)},close(){setTimeout((()=>{this.popup=!1,this.$emit("maskClick",this.value)}),20)},setEmit(e){"timestamp"!==this.returnType&&"date"!==this.returnType||(Array.isArray(e)?(this.hasTime||(e[0]=e[0]+" 00:00:00",e[1]=e[1]+" 00:00:00"),e[0]=this.createTimestamp(e[0]),e[1]=this.createTimestamp(e[1]),"date"===this.returnType&&(e[0]=new Date(e[0]),e[1]=new Date(e[1]))):(this.hasTime||(e+=" 00:00:00"),e=this.createTimestamp(e),"date"===this.returnType&&(e=new Date(e)))),this.formItem&&this.formItem.setValue(e),this.$emit("change",e),this.$emit("input",e),this.$emit("update:modelValue",e),this.isEmitValue=!0},createTimestamp(e){return e=this.fixIosDateFormat(e),Date.parse(new Date(e))},singleChange(e){this.tempSingleDate=e.fulldate,this.hasTime||this.confirmSingleChange()},confirmSingleChange(){this.tempSingleDate?(this.hasTime?this.singleVal=this.tempSingleDate+" "+(this.time?this.time:"00:00:00"):this.singleVal=this.tempSingleDate,this.setEmit(this.singleVal),this.popup=!1):this.popup=!1},leftChange(e){const{before:t,after:a}=e.range;this.rangeChange(t,a);const i={before:e.range.before,after:e.range.after,data:e.range.data,fulldate:e.fulldate};this.startMultipleStatus=Object.assign({},this.startMultipleStatus,i)},rightChange(e){const{before:t,after:a}=e.range;this.rangeChange(t,a);const i={before:e.range.before,after:e.range.after,data:e.range.data,fulldate:e.fulldate};this.endMultipleStatus=Object.assign({},this.endMultipleStatus,i)},mobileChange(e){if(this.isRange){const{before:t,after:a}=e.range;if(this.handleStartAndEnd(t,a,!0),this.hasTime){const{startTime:t,endTime:a}=e.timeRange;this.tempRange.startTime=t,this.tempRange.endTime=a}this.confirmRangeChange()}else this.hasTime?this.singleVal=e.fulldate+" "+e.time:this.singleVal=e.fulldate,this.setEmit(this.singleVal);this.$refs.mobile.close()},rangeChange(e,t){e&&t&&(this.handleStartAndEnd(e,t,!0),this.hasTime||this.confirmRangeChange())},confirmRangeChange(){if(!this.tempRange.startDate&&!this.tempRange.endDate)return void(this.popup=!1);let e,t;this.hasTime?(e=this.range.startDate=this.tempRange.startDate+" "+(this.tempRange.startTime?this.tempRange.startTime:"00:00:00"),t=this.range.endDate=this.tempRange.endDate+" "+(this.tempRange.endTime?this.tempRange.endTime:"00:00:00")):(e=this.range.startDate=this.tempRange.startDate,t=this.range.endDate=this.tempRange.endDate);const a=[e,t];this.setEmit(a),this.popup=!1},handleStartAndEnd(e,t,a=!1){if(!e||!t)return;const i=a?"tempRange":"range";this.dateCompare(e,t)?(this[i].startDate=e,this[i].endDate=t):(this[i].startDate=t,this[i].endDate=e)},dateCompare:(e,t)=>(e=new Date(e.replace("-","/").replace("-","/")))<=(t=new Date(t.replace("-","/").replace("-","/"))),diffDate(e,t){e=new Date(e.replace("-","/").replace("-","/"));const a=((t=new Date(t.replace("-","/").replace("-","/")))-e)/864e5;return Math.abs(a)},clear(e=!0){this.isRange?(this.range.startDate="",this.range.endDate="",this.tempRange.startDate="",this.tempRange.startTime="",this.tempRange.endDate="",this.tempRange.endTime="",this.isPhone?this.$refs.mobile&&this.$refs.mobile.clearCalender():(this.$refs.left&&this.$refs.left.clearCalender(),this.$refs.right&&this.$refs.right.clearCalender(),this.$refs.right&&this.$refs.right.next()),e&&(this.formItem&&this.formItem.setValue([]),this.$emit("change",[]),this.$emit("input",[]),this.$emit("update:modelValue",[]))):(this.singleVal="",this.tempSingleDate="",this.time="",this.isPhone?this.$refs.mobile&&this.$refs.mobile.clearCalender():this.$refs.pcSingle&&this.$refs.pcSingle.clearCalender(),e&&(this.formItem&&this.formItem.setValue(""),this.$emit("change",""),this.$emit("input",""),this.$emit("update:modelValue","")))},parseDate(e){e=this.fixIosDateFormat(e);const t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate(),l=t.getHours(),o=t.getMinutes(),s=t.getSeconds();return{defDate:a+"-"+this.lessTen(i)+"-"+this.lessTen(n),defTime:this.lessTen(l)+":"+this.lessTen(o)+(this.hideSecond?"":":"+this.lessTen(s))}},lessTen:e=>e<10?"0"+e:e,fixIosDateFormat:e=>("string"==typeof e&&(e=e.replace(/-/g,"/")),e),leftMonthSwitch(e){},rightMonthSwitch(e){}}},[["render",function(t,a,i,n,l,o){const s=c(e.resolveDynamicComponent("uni-icons"),he),r=e.resolveComponent("time-picker"),d=e.resolveComponent("calendar");return e.openBlock(),e.createElementBlock("view",{class:"uni-date"},[e.createElementVNode("view",{class:"uni-date-editor",onClick:a[4]||(a[4]=(...e)=>o.show&&o.show(...e))},[e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-date-editor--x",{"uni-date-editor--x__disabled":i.disabled,"uni-date-x--border":i.border}])},[l.isRange?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-x uni-date-range"},[e.createVNode(s,{type:"calendar",color:"#e1e1e1",size:"22"}),e.withDirectives(e.createElementVNode("input",{class:"uni-date__x-input t-c",type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>l.range.startDate=e),placeholder:o.startPlaceholderText,disabled:!0},null,8,["placeholder"]),[[e.vModelText,l.range.startDate]]),e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("view",{class:""},e.toDisplayString(i.rangeSeparator),1)]),!0),e.withDirectives(e.createElementVNode("input",{class:"uni-date__x-input t-c",type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>l.range.endDate=e),placeholder:o.endPlaceholderText,disabled:!0},null,8,["placeholder"]),[[e.vModelText,l.range.endDate]])])):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-x uni-date-single"},[e.createVNode(s,{type:"calendar",color:"#e1e1e1",size:"22"}),e.withDirectives(e.createElementVNode("input",{class:"uni-date__x-input",type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>l.singleVal=e),placeholder:o.singlePlaceholderText,disabled:!0},null,8,["placeholder"]),[[e.vModelText,l.singleVal]])])),o.showClearIcon?(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-date__icon-clear",onClick:a[3]||(a[3]=e.withModifiers(((...e)=>o.clear&&o.clear(...e)),["stop"]))},[e.createVNode(s,{type:"clear",color:"#e1e1e1",size:"18"})])):e.createCommentVNode("",!0)],2)]),!0)]),e.withDirectives(e.createElementVNode("view",{class:"uni-date-mask",onClick:a[5]||(a[5]=(...e)=>o.close&&o.close(...e))},null,512),[[e.vShow,l.popup]]),l.isPhone?e.createCommentVNode("",!0):e.withDirectives((e.openBlock(),e.createElementBlock("view",{key:0,ref:"datePicker",class:"uni-date-picker__container"},[l.isRange?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-range--x",style:e.normalizeStyle(l.popover)},[e.createElementVNode("view",{class:"uni-popper__arrow"}),l.hasTime?(e.openBlock(),e.createElementBlock("view",{key:0,class:"popup-x-header uni-date-changed"},[e.createElementVNode("view",{class:"popup-x-header--datetime"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":a[10]||(a[10]=e=>l.tempRange.startDate=e),placeholder:o.startDateText},null,8,["placeholder"]),[[e.vModelText,l.tempRange.startDate]]),e.createVNode(r,{type:"time",modelValue:l.tempRange.startTime,"onUpdate:modelValue":a[12]||(a[12]=e=>l.tempRange.startTime=e),start:o.reactStartTime,border:!1,disabled:!l.tempRange.startDate,hideSecond:i.hideSecond},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":a[11]||(a[11]=e=>l.tempRange.startTime=e),placeholder:o.startTimeText,disabled:!l.tempRange.startDate},null,8,["placeholder","disabled"]),[[e.vModelText,l.tempRange.startTime]])])),_:1},8,["modelValue","start","disabled","hideSecond"])]),e.createVNode(s,{type:"arrowthinright",color:"#999",style:{"line-height":"40px"}}),e.createElementVNode("view",{class:"popup-x-header--datetime"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":a[13]||(a[13]=e=>l.tempRange.endDate=e),placeholder:o.endDateText},null,8,["placeholder"]),[[e.vModelText,l.tempRange.endDate]]),e.createVNode(r,{type:"time",modelValue:l.tempRange.endTime,"onUpdate:modelValue":a[15]||(a[15]=e=>l.tempRange.endTime=e),end:o.reactEndTime,border:!1,disabled:!l.tempRange.endDate,hideSecond:i.hideSecond},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":a[14]||(a[14]=e=>l.tempRange.endTime=e),placeholder:o.endTimeText,disabled:!l.tempRange.endDate},null,8,["placeholder","disabled"]),[[e.vModelText,l.tempRange.endTime]])])),_:1},8,["modelValue","end","disabled","hideSecond"])])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"popup-x-body"},[e.createVNode(d,{ref:"left",showMonth:!1,"start-date":l.caleRange.startDate,"end-date":l.caleRange.endDate,range:!0,onChange:o.leftChange,pleStatus:l.endMultipleStatus,onFirstEnterCale:o.updateRightCale,onMonthSwitch:o.leftMonthSwitch,style:{padding:"0 8px"}},null,8,["start-date","end-date","onChange","pleStatus","onFirstEnterCale","onMonthSwitch"]),e.createVNode(d,{ref:"right",showMonth:!1,"start-date":l.caleRange.startDate,"end-date":l.caleRange.endDate,range:!0,onChange:o.rightChange,pleStatus:l.startMultipleStatus,onFirstEnterCale:o.updateLeftCale,onMonthSwitch:o.rightMonthSwitch,style:{padding:"0 8px","border-left":"1px solid #F1F1F1"}},null,8,["start-date","end-date","onChange","pleStatus","onFirstEnterCale","onMonthSwitch"])]),l.hasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"popup-x-footer"},[e.createElementVNode("text",{class:"",onClick:a[16]||(a[16]=(...e)=>o.clear&&o.clear(...e))},e.toDisplayString(o.clearText),1),e.createElementVNode("text",{class:"confirm",onClick:a[17]||(a[17]=(...e)=>o.confirmRangeChange&&o.confirmRangeChange(...e))},e.toDisplayString(o.okText),1)])):e.createCommentVNode("",!0)],4)):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-single--x",style:e.normalizeStyle(l.popover)},[e.createElementVNode("view",{class:"uni-popper__arrow"}),l.hasTime?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-changed popup-x-header"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input t-c",type:"text","onUpdate:modelValue":a[6]||(a[6]=e=>l.tempSingleDate=e),placeholder:o.selectDateText},null,8,["placeholder"]),[[e.vModelText,l.tempSingleDate]]),e.createVNode(r,{type:"time",modelValue:l.time,"onUpdate:modelValue":a[8]||(a[8]=e=>l.time=e),border:!1,disabled:!l.tempSingleDate,start:o.reactStartTime,end:o.reactEndTime,hideSecond:i.hideSecond,style:{width:"100%"}},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input t-c",type:"text","onUpdate:modelValue":a[7]||(a[7]=e=>l.time=e),placeholder:o.selectTimeText,disabled:!l.tempSingleDate},null,8,["placeholder","disabled"]),[[e.vModelText,l.time]])])),_:1},8,["modelValue","disabled","start","end","hideSecond"])])):e.createCommentVNode("",!0),e.createVNode(d,{ref:"pcSingle",showMonth:!1,"start-date":l.caleRange.startDate,"end-date":l.caleRange.endDate,date:l.defSingleDate,onChange:o.singleChange,style:{padding:"0 8px"}},null,8,["start-date","end-date","date","onChange"]),l.hasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"popup-x-footer"},[e.createElementVNode("text",{class:"confirm",onClick:a[9]||(a[9]=(...e)=>o.confirmSingleChange&&o.confirmSingleChange(...e))},e.toDisplayString(o.okText),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-date-popper__arrow"})],4))],512)),[[e.vShow,l.popup]]),e.withDirectives(e.createVNode(d,{ref:"mobile",clearDate:!1,date:l.defSingleDate,defTime:o.reactMobDefTime,"start-date":l.caleRange.startDate,"end-date":l.caleRange.endDate,selectableTimes:o.mobSelectableTime,pleStatus:l.endMultipleStatus,showMonth:!1,range:l.isRange,typeHasTime:l.hasTime,insert:!1,hideSecond:i.hideSecond,onConfirm:o.mobileChange},null,8,["date","defTime","start-date","end-date","selectableTimes","pleStatus","range","typeHasTime","hideSecond","onConfirm"]),[[e.vShow,l.isPhone]])])}],["__scopeId","data-v-74291fbf"]]);var Re=H({name:"TableCheckbox",emits:["checkboxSelected"],props:{indeterminate:{type:Boolean,default:!1},checked:{type:[Boolean,String],default:!1},disabled:{type:Boolean,default:!1},index:{type:Number,default:-1},cellData:{type:Object,default:()=>({})}},watch:{checked(e){"boolean"==typeof this.checked?this.isChecked=e:this.isChecked=!0},indeterminate(e){this.isIndeterminate=e}},data:()=>({isChecked:!1,isDisabled:!1,isIndeterminate:!1}),created(){"boolean"==typeof this.checked&&(this.isChecked=this.checked),this.isDisabled=this.disabled},methods:{selected(){this.isDisabled||(this.isIndeterminate=!1,this.isChecked=!this.isChecked,this.$emit("checkboxSelected",{checked:this.isChecked,data:this.cellData}))}}},[["render",function(t,a,i,n,l,o){return e.openBlock(),e.createElementBlock("view",{class:"uni-table-checkbox",onClick:a[0]||(a[0]=(...e)=>o.selected&&o.selected(...e))},[i.indeterminate?(e.openBlock(),e.createElementBlock("view",{key:1,class:"checkbox__inner checkbox--indeterminate"},[e.createElementVNode("view",{class:"checkbox__inner-icon"})])):(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["checkbox__inner",{"is-checked":l.isChecked,"is-disable":l.isDisabled}])},[e.createElementVNode("view",{class:"checkbox__inner-icon"})],2))])}],["__scopeId","data-v-3272ab8c"]]);const Pe={reset:"重置",search:"搜索",submit:"确定",filter:"筛选",gt:"大于等于",lt:"小于等于",date:"日期范围"},Oe="select",ze="search",Ae="range",je="date",Fe="timestamp";var Ue=H({name:"uniTh",options:{virtualHost:!0},components:{dropdown:H({name:"FilterDropdown",emits:["change"],components:{checkBox:Re},options:{virtualHost:!0},props:{filterType:{type:String,default:Oe},filterData:{type:Array,default:()=>[]},mode:{type:String,default:"default"},map:{type:Object,default:()=>({text:"text",value:"value"})}},computed:{canReset(){return this.isSearch?this.filterValue.length>0:this.isSelect?this.checkedValues.length>0:this.isRange?this.gtValue.length>0&&this.ltValue.length>0:!!this.isDate&&this.dateSelect.length>0},isSelect(){return this.filterType===Oe},isSearch(){return this.filterType===ze},isRange(){return this.filterType===Ae},isDate(){return this.filterType===je||this.filterType===Fe}},watch:{filters(e){this._copyFilters()},indeterminate(e){this.isIndeterminate=e}},data:()=>({resource:Pe,enabled:!0,isOpened:!1,dataList:[],filterValue:"",checkedValues:[],gtValue:"",ltValue:"",dateRange:[],dateSelect:[]}),created(){this._copyFilters()},methods:{_copyFilters(){let e=JSON.parse(JSON.stringify(this.filterData));for(let t=0;t<e.length;t++)void 0===e[t].checked&&(e[t].checked=!1);this.dataList=e},openPopup(){this.isOpened=!0,this.isDate&&this.$nextTick((()=>{this.dateRange.length||this.resetDate(),this.$refs.datetimepicker.show()}))},closePopup(){this.isOpened=!1},handleClose(e){this.closePopup()},resetDate(){let e=(new Date).toISOString().split("T")[0];this.dateRange=[e+" 0:00:00",e+" 23:59:59"]},onDropdown(e){this.openPopup()},onItemClick(e,t){let a=this.dataList,i=a[t];void 0===i.checked?a[t].checked=!0:a[t].checked=!i.checked;let n=[];for(let l=0;l<a.length;l++){const e=a[l];e.checked&&n.push(e.value)}this.checkedValues=n},datetimechange(e){this.closePopup(),this.dateRange=e,this.dateSelect=e,this.$emit("change",{filterType:this.filterType,filter:e})},timepickerclose(e){this.closePopup()},handleSelectSubmit(){this.closePopup(),this.$emit("change",{filterType:this.filterType,filter:this.checkedValues})},handleSelectReset(){if(this.canReset){var e=this.dataList;for(let t=0;t<e.length;t++){let a=e[t];this.$set(a,"checked",!1)}this.checkedValues=[],this.handleSelectSubmit()}},handleSearchSubmit(){this.closePopup(),this.$emit("change",{filterType:this.filterType,filter:this.filterValue})},handleSearchReset(){this.canReset&&(this.filterValue="",this.handleSearchSubmit())},handleRangeSubmit(e){this.closePopup(),this.$emit("change",{filterType:this.filterType,filter:!0===e?[]:[parseInt(this.gtValue),parseInt(this.ltValue)]})},handleRangeReset(){this.canReset&&(this.gtValue="",this.ltValue="",this.handleRangeSubmit(!0))}}},[["render",function(t,a,i,n,l,o){const s=e.resolveComponent("check-box"),r=c(e.resolveDynamicComponent("uni-datetime-picker"),Le);return e.openBlock(),e.createElementBlock("view",{class:"uni-filter-dropdown"},[e.createElementVNode("view",{class:"dropdown-btn",onClick:a[0]||(a[0]=(...e)=>o.onDropdown&&o.onDropdown(...e))},[o.isSelect||o.isRange?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["icon-select",{active:o.canReset}])},null,2)):e.createCommentVNode("",!0),o.isSearch?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["icon-search",{active:o.canReset}])},[e.createElementVNode("view",{class:"icon-search-0"}),e.createElementVNode("view",{class:"icon-search-1"})],2)):e.createCommentVNode("",!0),o.isDate?(e.openBlock(),e.createElementBlock("view",{key:2,class:e.normalizeClass(["icon-calendar",{active:o.canReset}])},[e.createElementVNode("view",{class:"icon-calendar-0"}),e.createElementVNode("view",{class:"icon-calendar-1"})],2)):e.createCommentVNode("",!0)]),l.isOpened?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-dropdown-cover",onClick:a[1]||(a[1]=(...e)=>o.handleClose&&o.handleClose(...e))})):e.createCommentVNode("",!0),l.isOpened?(e.openBlock(),e.createElementBlock("view",{key:1,class:"dropdown-popup dropdown-popup-right",onClick:a[11]||(a[11]=e.withModifiers((()=>{}),["stop"]))},[o.isSelect?(e.openBlock(),e.createElementBlock("view",{key:0,class:"list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.dataList,((t,a)=>(e.openBlock(),e.createElementBlock("label",{class:"flex-r a-i-c list-item",key:a,onClick:e=>o.onItemClick(e,a)},[e.createVNode(s,{class:"check",checked:t.checked},null,8,["checked"]),e.createElementVNode("view",{class:"checklist-content"},[e.createElementVNode("text",{class:"checklist-text",style:e.normalizeStyle(t.styleIconText)},e.toDisplayString(t[i.map.text]),5)])],8,["onClick"])))),128))])):e.createCommentVNode("",!0),o.isSelect?(e.openBlock(),e.createElementBlock("view",{key:1,class:"flex-r opera-area"},[e.createElementVNode("view",{class:e.normalizeClass(["flex-f btn btn-default",{disable:!o.canReset}]),onClick:a[2]||(a[2]=(...e)=>o.handleSelectReset&&o.handleSelectReset(...e))},e.toDisplayString(l.resource.reset),3),e.createElementVNode("view",{class:"flex-f btn btn-submit",onClick:a[3]||(a[3]=(...e)=>o.handleSelectSubmit&&o.handleSelectSubmit(...e))},e.toDisplayString(l.resource.submit),1)])):e.createCommentVNode("",!0),o.isSearch?(e.openBlock(),e.createElementBlock("view",{key:2,class:"search-area"},[e.withDirectives(e.createElementVNode("input",{class:"search-input","onUpdate:modelValue":a[4]||(a[4]=e=>l.filterValue=e)},null,512),[[e.vModelText,l.filterValue]])])):e.createCommentVNode("",!0),o.isSearch?(e.openBlock(),e.createElementBlock("view",{key:3,class:"flex-r opera-area"},[e.createElementVNode("view",{class:"flex-f btn btn-submit",onClick:a[5]||(a[5]=(...e)=>o.handleSearchSubmit&&o.handleSearchSubmit(...e))},e.toDisplayString(l.resource.search),1),e.createElementVNode("view",{class:e.normalizeClass(["flex-f btn btn-default",{disable:!o.canReset}]),onClick:a[6]||(a[6]=(...e)=>o.handleSearchReset&&o.handleSearchReset(...e))},e.toDisplayString(l.resource.reset),3)])):e.createCommentVNode("",!0),o.isRange?(e.openBlock(),e.createElementBlock("view",{key:4},[e.createElementVNode("view",{class:"input-label"},e.toDisplayString(l.resource.gt),1),e.withDirectives(e.createElementVNode("input",{class:"input","onUpdate:modelValue":a[7]||(a[7]=e=>l.gtValue=e)},null,512),[[e.vModelText,l.gtValue]]),e.createElementVNode("view",{class:"input-label"},e.toDisplayString(l.resource.lt),1),e.withDirectives(e.createElementVNode("input",{class:"input","onUpdate:modelValue":a[8]||(a[8]=e=>l.ltValue=e)},null,512),[[e.vModelText,l.ltValue]])])):e.createCommentVNode("",!0),o.isRange?(e.openBlock(),e.createElementBlock("view",{key:5,class:"flex-r opera-area"},[e.createElementVNode("view",{class:e.normalizeClass(["flex-f btn btn-default",{disable:!o.canReset}]),onClick:a[9]||(a[9]=(...e)=>o.handleRangeReset&&o.handleRangeReset(...e))},e.toDisplayString(l.resource.reset),3),e.createElementVNode("view",{class:"flex-f btn btn-submit",onClick:a[10]||(a[10]=(...e)=>o.handleRangeSubmit&&o.handleRangeSubmit(...e))},e.toDisplayString(l.resource.submit),1)])):e.createCommentVNode("",!0),o.isDate?(e.openBlock(),e.createElementBlock("view",{key:6},[e.createVNode(r,{ref:"datetimepicker",value:l.dateRange,type:"datetimerange","return-type":"timestamp",onChange:o.datetimechange,onMaskClick:o.timepickerclose},{default:e.withCtx((()=>[e.createElementVNode("view")])),_:1},8,["value","onChange","onMaskClick"])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])}],["__scopeId","data-v-e27adb08"]])},emits:["sort-change","filter-change"],props:{width:{type:[String,Number],default:""},align:{type:String,default:"left"},rowspan:{type:[Number,String],default:1},colspan:{type:[Number,String],default:1},sortable:{type:Boolean,default:!1},filterType:{type:String,default:""},filterData:{type:Array,default:()=>[]}},data:()=>({border:!1,ascending:!1,descending:!1}),computed:{contentAlign(){let e="left";switch(this.align){case"left":e="flex-start";break;case"center":e="center";break;case"right":e="flex-end"}return e}},created(){this.root=this.getTable("uniTable"),this.rootTr=this.getTable("uniTr"),this.rootTr.minWidthUpdate(this.width?this.width:140),this.border=this.root.border,this.root.thChildren.push(this)},methods:{sort(){if(this.sortable)return this.clearOther(),this.ascending||this.descending?this.ascending&&!this.descending?(this.ascending=!1,this.descending=!0,void this.$emit("sort-change",{order:"descending"})):void(!this.ascending&&this.descending&&(this.ascending=!1,this.descending=!1,this.$emit("sort-change",{order:null}))):(this.ascending=!0,void this.$emit("sort-change",{order:"ascending"}))},ascendingFn(){this.clearOther(),this.ascending=!this.ascending,this.descending=!1,this.$emit("sort-change",{order:this.ascending?"ascending":null})},descendingFn(){this.clearOther(),this.descending=!this.descending,this.ascending=!1,this.$emit("sort-change",{order:this.descending?"descending":null})},clearOther(){this.root.thChildren.map((e=>(e!==this&&(e.ascending=!1,e.descending=!1),e)))},ondropdown(e){this.$emit("filter-change",e)},getTable(e){let t=this.$parent,a=t.$options.name;for(;a!==e;){if(t=t.$parent,!t)return!1;a=t.$options.name}return t}}},[["render",function(t,a,i,n,l,o){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-table-th",{"table--border":l.border}]),style:e.normalizeStyle({width:i.width+"px","text-align":i.align})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)}],["__scopeId","data-v-71c83bd8"]]);var He=H({name:"uniTr",components:{tableCheckbox:Re},props:{disabled:{type:Boolean,default:!1},keyValue:{type:[String,Number],default:""}},options:{virtualHost:!0},data:()=>({value:!1,border:!1,selection:!1,widthThArr:[],ishead:!0,checked:!1,indeterminate:!1}),created(){this.root=this.getTable(),this.head=this.getTable("uniThead"),this.head&&(this.ishead=!1,this.head.init(this)),this.border=this.root.border,this.selection=this.root.type,this.root.trChildren.push(this);const e=this.root.data.find((e=>e[this.root.rowKey]===this.keyValue));e&&(this.rowData=e),this.root.isNodata()},mounted(){if(this.widthThArr.length>0){const e="selection"===this.selection?50:0;this.root.minWidth=this.widthThArr.reduce(((e,t)=>Number(e)+Number(t)))+e}},unmounted(){const e=this.root.trChildren.findIndex((e=>e===this));this.root.trChildren.splice(e,1),this.root.isNodata()},methods:{minWidthUpdate(e){this.widthThArr.push(e)},checkboxSelected(e){let t=this.root.data.find((e=>e[this.root.rowKey]===this.keyValue));this.checked=e.checked,this.root.check(t||this,e.checked,t?this.keyValue:null)},change(e){this.root.trChildren.forEach((t=>{t===this&&this.root.check(this,e.detail.value.length>0)}))},getTable(e="uniTable"){let t=this.$parent,a=t.$options.name;for(;a!==e;){if(t=t.$parent,!t)return!1;a=t.$options.name}return t}}},[["render",function(t,a,i,n,l,o){const s=e.resolveComponent("table-checkbox");return e.openBlock(),e.createElementBlock("view",{class:"uni-table-tr"},["selection"===l.selection?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["checkbox",{"tr-table--border":l.border}])},[e.createVNode(s,{checked:l.checked,indeterminate:l.indeterminate,disabled:i.disabled,onCheckboxSelected:o.checkboxSelected},null,8,["checked","indeterminate","disabled","onCheckboxSelected"])],2)):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-5c167815"]]);var Ge=H({name:"uniTd",options:{virtualHost:!0},props:{width:{type:[String,Number],default:""},align:{type:String,default:"left"},rowspan:{type:[Number,String],default:1},colspan:{type:[Number,String],default:1}},data:()=>({border:!1}),created(){this.root=this.getTable(),this.border=this.root.border},methods:{getTable(){let e=this.$parent,t=e.$options.name;for(;"uniTable"!==t;){if(e=e.$parent,!e)return!1;t=e.$options.name}return e}}},[["render",function(t,a,i,n,l,o){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-table-td",{"table--border":l.border}]),style:e.normalizeStyle({width:i.width+"px","text-align":i.align})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)}],["__scopeId","data-v-a3ccb79a"]]);var Ye=H({name:"uniTable",options:{virtualHost:!0},emits:["selection-change"],props:{data:{type:Array,default:()=>[]},border:{type:Boolean,default:!1},stripe:{type:Boolean,default:!1},type:{type:String,default:""},emptyText:{type:String,default:"没有更多数据"},loading:{type:Boolean,default:!1},rowKey:{type:String,default:""}},data:()=>({noData:!0,minWidth:0,multiTableHeads:[]}),watch:{loading(e){},data(e){this.theadChildren,this.theadChildren&&this.theadChildren.rowspan,this.noData=!1}},created(){this.trChildren=[],this.thChildren=[],this.theadChildren=null,this.backData=[],this.backIndexData=[]},methods:{isNodata(){this.theadChildren;let e=1;this.theadChildren&&(e=this.theadChildren.rowspan),this.noData=this.trChildren.length-e<=0},selectionAll(){let e=1,t=this.theadChildren;this.theadChildren?e=t.rowspan-1:t=this.trChildren[0];let a=this.data&&this.data.length.length>0;t.checked=!0,t.indeterminate=!1,this.trChildren.forEach(((t,i)=>{if(!t.disabled){if(t.checked=!0,a&&t.keyValue){const e=this.data.find((e=>e[this.rowKey]===t.keyValue));this.backData.find((t=>t[this.rowKey]===e[this.rowKey]))||this.backData.push(e)}i>e-1&&-1===this.backIndexData.indexOf(i-e)&&this.backIndexData.push(i-e)}})),this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})},toggleRowSelection(e,t){e=[].concat(e),this.trChildren.forEach(((a,i)=>{const n=e.findIndex((e=>"number"==typeof e?e===i-1:e[this.rowKey]===a.keyValue));let l=a.checked;-1!==n&&(a.checked="boolean"==typeof t?t:!a.checked,l!==a.checked&&this.check(a.rowData||a,a.checked,a.rowData?a.keyValue:null,!0))})),this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})},clearSelection(){let e=this.theadChildren;this.theadChildren||(e=this.trChildren[0]),e.checked=!1,e.indeterminate=!1,this.trChildren.forEach((e=>{e.checked=!1})),this.backData=[],this.backIndexData=[],this.$emit("selection-change",{detail:{value:[],index:[]}})},toggleAllSelection(){let e=[],t=1,a=this.theadChildren;this.theadChildren?t=a.rowspan-1:a=this.trChildren[0],this.trChildren.forEach(((a,i)=>{a.disabled||i>t-1&&e.push(i-t)})),this.toggleRowSelection(e)},check(e,t,a,i){let n=this.theadChildren;this.theadChildren||(n=this.trChildren[0]);let l=this.trChildren.findIndex(((t,a)=>e===t));if(l<0&&(l=this.data.findIndex((e=>e[this.rowKey]===a))+1),this.trChildren.filter((e=>!e.disabled&&e.keyValue)).length,0===l)return void(t?this.selectionAll():this.clearSelection());if(t)a&&this.backData.push(e),this.backIndexData.push(l-1);else{const e=this.backData.findIndex((e=>e[this.rowKey]===a)),t=this.backIndexData.findIndex((e=>e===l-1));a&&this.backData.splice(e,1),this.backIndexData.splice(t,1)}this.trChildren.find(((e,t)=>t>0&&!e.checked&&!e.disabled))?(n.indeterminate=!0,n.checked=!1):(n.indeterminate=!1,n.checked=!0),0===this.backIndexData.length&&(n.indeterminate=!1),i||this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})}}},[["render",function(t,a,i,n,l,o){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-table-scroll",{"table--border":i.border,"border-none":!l.noData}])},[e.createElementVNode("view",{class:e.normalizeClass(["uni-table",{"table--stripe":i.stripe}]),style:e.normalizeStyle({"min-width":l.minWidth+"px"})},[e.renderSlot(t.$slots,"default",{},void 0,!0),l.noData?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-table-loading"},[e.createElementVNode("view",{class:e.normalizeClass(["uni-table-text",{"empty-border":i.border}])},e.toDisplayString(i.emptyText),3)])):e.createCommentVNode("",!0),i.loading?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["uni-table-mask",{"empty-border":i.border}])},[e.createElementVNode("div",{class:"uni-table--loader"})],2)):e.createCommentVNode("",!0)],6)],2)}],["__scopeId","data-v-3e25b790"]]);var We=H({props:{height:{type:String,default:"50%"},show:{type:Boolean,default:!1}},emits:["confirm","update:show"],setup(t,{emit:a}){e.ref(!0),e.ref(null);const i=v(),n=()=>{a("update:show",!1)};return(l,o)=>e.withDirectives((e.openBlock(),e.createElementBlock("view",{class:"fixed fixed left-0 top-0 w-full h-full z-10"},[e.createElementVNode("view",{class:"w-full h-full bg-gray-800 bg-opacity-40 mask",onClick:n}),t.show?(e.openBlock(),e.createElementBlock("view",{key:0,class:"container absolute bottom-0 left-0 w-full rounded-t-md overflow-y-scroll",style:e.normalizeStyle({height:t.height})},[e.createElementVNode("view",{class:"w-full h-full bg-gray-50 flex flex-col"},[e.createElementVNode("view",{class:"text-center text-sm linear-bg text-white py-3 px-3"},"添加到歌单"),e.createElementVNode("scroll-view",{class:"flex-1 overflow-hidden","scroll-y":"true"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i).state.albumList,((t,i)=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>{return i=t.id,a("confirm",i),void a("update:show",!1);var i},class:"py-2 hover:bg-gray-100 text-gray-500 px-3 flex justify-between items-center text-xs border-b",key:t.id},[e.createElementVNode("image",{src:t.pic,class:"w-12 h-12 mr-4 rounded"},null,8,["src"]),e.createElementVNode("text",{class:"truncate mr-2 flex-2 flex-shrink-0"},e.toDisplayString(t.name),1)],8,["onClick"])))),128))])])],4)):e.createCommentVNode("",!0)],512)),[[e.vShow,t.show]])}},[["__scopeId","data-v-ee1fe7b8"]]);const qe=e.defineComponent({setup(t){const a="http://preferyou.cn/freed/icon.png",i=e.ref(null),n=e.ref(!1),l=e.ref(),o=e.ref(),s=e.ref(!1),r=e.inject("$filters"),d=e.inject("$eventBus"),u=e.ref(!1),h=e.ref({name:"",updateTime:"",pic:"",desc:"",nickname:"",avatar:""}),p=e.ref([]),f=v(),g=e.ref({});m((e=>{l.value=+e.type,s.value=Boolean(+e.rank),o.value=e.id}));const k=async e=>{n.value=!0;try{const t=await(e=>J({url:`${K}/playlist/detail?id=${e}`,methods:"GET"}))(e);if(200===t.data.code){const{name:e,updateTime:a,description:i,coverImgUrl:n}=t.data.playlist,{nickname:l,avatarUrl:o}=t.data.playlist.creator;h.value={name:e,updateTime:a,pic:n,desc:i,nickname:l,avatar:o},p.value=t.data.playlist.tracks.map((e=>({name:e.name,time:e.dt,id:e.id,mv:e.mv,album:e.al.name||e.name,author:e.ar.map((e=>({nickname:e.name,id:e.id})))})))}n.value=!1}catch{n.value=!1}},y=async e=>{n.value=!0;const t=await(e=>te({url:`${ee}//getSongListDetail?disstid=${e}`,methods:"GET"}))(e);if(0===t.data.response.code){let{dissname:a,desc:i,logo:n,ctime:l,headurl:o,nickname:s}=t.data.response.cdlist[0];l*=1e3,h.value={name:a,id:e,desc:i,pic:n,updateTime:l,avatar:o,nickname:s},p.value=t.data.response.cdlist[0].songlist.map((e=>({name:e.name,id:e.mid,mv:e.mv.vid||void 0,time:1e3*e.interval,album:e.album.name,pic:e.album.picUrl,author:e.singer.map((e=>({nickname:e.name,id:e.id})))})))}},_=async e=>{const t=await(e=>ne({url:`${ie}/kuwo/musicList?pid=${e}`,methods:"GET"}))(e);if(200===t.data.code){const{name:e,info:a,img:i,updateTime:n,uPic:l,userName:o}=t.data.data;h.value={name:e,desc:a,pic:i,updateTime:n,avatar:l,nickname:o},p.value=t.data.data.musicList.map((e=>({name:e.name,id:e.rid,mv:e.mvpayinfo.vid,time:1e3*e.duration,album:e.album,pic:e.pic,author:[{nickname:e.artist,id:e.artistid}]})))}},w=async e=>{const t=await(e=>re({url:`${se}/kugou/albumInfo?albumId=${e}`,methods:"GET"}))(e);if(t.data.info.list){let{specialname:e,intro:a,imgurl:i,publishtime:n,user_avatar:l,nickname:o}=t.data.info.list;i=i.replace("{size}","400"),h.value={name:e,desc:a,pic:i,updateTime:n,avatar:l,nickname:o}}t.data.list.list.info&&(p.value=t.data.list.list.info.map((e=>({name:e.filename.split("-")[1].trim(),id:e.hash,mv:e.mvhash||void 0,time:1e3*e.duration,album:"",pic:"",author:[{nickname:e.filename.split("-")[0],id:0}]}))))},b=async e=>{try{n.value=!0;const t=await(e=>ne({url:`${ie}/kuwo/rank/musicList?bangId=${e}&rn=100`,method:"GET"}))(e);200===t.data.code&&(p.value=t.data.data.musicList.map((e=>({name:e.name,id:e.musicrid,mv:e.mvpayinfo.vid,time:1e3*e.duration,album:e.album,pic:e.pic,author:[{nickname:e.artist,id:e.artistid}]}))));const a=await le();if(200===a.data.code){let t=a.data.data.reduce(((e,t)=>e.concat(t.list)),[]).find((t=>t.sourceid==e)),{name:i,intro:n,pic:l,updateTime:o,pic:s,nickname:r}=t;h.value={name:i,desc:n,pic:l,updateTime:o,avatar:s,nickname:r}}n.value=!1}catch{n.value=!1}},x=async e=>{try{n.value=!0;const t=await(e=>te({url:`${ee}/getRanks?topId=${e}&limit=100`,method:"GET"}))(e);if(0===t.data.response.code){let{title:e,titleShare:a,frontPicUrl:i,updateTime:n,topAlbumURL:l,AdShareContent:o}=t.data.response.req_1.data.data;h.value={name:e,desc:a,pic:i,updateTime:n,avatar:l,nickname:o};let s=[];s=t.data.response.req_1.data.songInfoList.length>0?t.data.response.req_1.data.songInfoList.map((e=>({name:e.name,id:e.mid,mv:e.mv.vid||void 0,time:1e3*e.interval,album:e.album.name,pic:e.album.picUrl,author:e.singer.map((e=>({nickname:e.name,id:e.id})))}))):t.data.response.req_1.data.data.song.map((e=>({name:e.title,id:e.songId,albumMid:e.albumMid,mv:e.vid||void 0,time:null,album:e.title,pic:e.cover,author:[{nickname:e.singerName,id:e.singerMid}]}))),p.value=s}n.value=!1}catch{n.value=!1}},D=async e=>{const t=await(e=>re({url:`${se}/kugou/rank/info?rankid=${e}`,method:"GET"}))(e);if(t.data.info){let{rankname:e,intro:a,imgurl:i,updateTime:n,img_cover:l,nickname:o}=t.data.info;i=i.replace("{size}","400"),l=l.replace("{size}","400"),h.value={name:e,desc:a,pic:i,updateTime:n,avatar:l,nickname:o};let s=[];t.data.songs.list&&(s=t.data.songs.list.map((e=>({name:e.filename.split("-")[1].trim(),id:e.hash,mv:e.mvhash||void 0,time:1e3*e.duration,album:e.filename.split("-")[1].trim(),pic:"",author:[{nickname:e.filename.split("-")[0],id:Math.random().toString(36).substr(2)}]})))),p.value=s}},S=async()=>{1==l.value?await k(o.value):2==l.value?s.value?await x(o.value):await y(o.value):3==l.value?s.value?await b(o.value):await _(o.value):4==l.value?s.value?await D(o.value):await w(o.value):0==l.value&&(0==o.value?await(async()=>{h.value={name:"我喜欢",desc:"用户喜欢的歌曲",pic:"",updateTime:"",avatar:"",nickname:"我"};let e=uni.getStorageSync("likeList");p.value=e.map((e=>({name:e.name,id:e.id,mv:e.mv,time:1e3*e.duration,album:e.album,pic:e.pic,author:e.author,platform:e.platform})))})():await(async e=>{let t=uni.getStorageSync("albumList"),a=t.findIndex((t=>t.id==e));-1!=a&&(h.value={name:t[a].name,desc:"用户自建歌单",pic:t[a].pic,updateTime:"",avatar:"",nickname:"我"},p.value=t[a].list.map((e=>({name:e.name,id:e.id,mv:e.mv,time:1e3*e.duration,album:e.album,pic:e.pic,author:e.author}))))})(o.value))},E=()=>{h.value.name&&d.emit("addCollect",{id:o.value,pic:h.value.pic,name:h.value.name,platform:l.value,isRank:+s.value})},C=()=>{d.emit("unCollect",{id:o.value,platform:l.value})},T=()=>{W(uni.showModal)({title:"全部播放",content:"播放全部会替换当前播放列表，是否继续?",showCancel:!0,confirmText:"继续"}).then((t=>{t.confirm&&d.emit("playAll",p.value.map((t=>({id:t.id,platform:l.value,author:e.toRaw(t.author).map((e=>({name:e.nickname,id:e.id}))),name:t.name}))))}))},V=()=>{W(uni.showModal)({title:"删除歌单",content:"确定要删除该歌单吗?",showCancel:!0}).then((e=>{e.confirm&&(d.emit("delAlbum",o.value),uni.navigateTo({url:"/pages/index/index"}))}))},N=t=>{d.emit("addSongToAlbum",{song:{id:g.value.id,platform:l.value||g.value.platform,name:g.value.name,author:e.toRaw(g.value.author),album:g.value.album,mv:g.value.mv,time:g.value.time},albumId:t})};return e.watch([()=>o.value],(()=>{S()})),e.watch((()=>n.value),(()=>{n.value?i.value&&i.value.open():i.value&&i.value.close()})),(t,n)=>{const s=c(e.resolveDynamicComponent("uni-th"),Ue),m=c(e.resolveDynamicComponent("uni-tr"),He),k=c(e.resolveDynamicComponent("uni-td"),Ge),v=c(e.resolveDynamicComponent("uni-table"),Ye);return e.openBlock(),e.createElementBlock("view",{class:"h-full flex flex-col"},[e.createVNode(Q,{mask:"true",click:"true",ref_key:"loadingRef",ref:i},null,512),e.createElementVNode("view",{class:"p-4 flex"},[e.createElementVNode("image",{class:"w-32 h-32 rounded mr-3 flex-shrink-0",src:h.value.pic||a},null,8,["src"]),e.createElementVNode("view",{class:"h-32 overflow-hidden flex flex-col"},[e.createElementVNode("text",{class:"text-base font-bold flex-shrink-0"},e.toDisplayString(h.value.name),1),e.createElementVNode("view",{class:"flex flex-shrink-0 items-center mt-2 justify-between"},[e.createElementVNode("view",{class:"flex items-center"},[e.createElementVNode("image",{class:"w-6 h-6 mr-2 rounded-full",src:h.value.avatar||a},null,8,["src"]),e.createElementVNode("text",{class:"text-xs text-purple-500 truncate"},e.toDisplayString(h.value.nickname),1)]),e.createElementVNode("text",{class:"text-xs text-gray-400 truncate"},e.toDisplayString(e.unref(r).dateFormat(h.value.updateTime)),1)]),e.createElementVNode("scroll-view",{"scroll-y":"",class:"text-xs flex-1 h-14 text-gray-500 mt-2"},[e.createElementVNode("text",null,e.toDisplayString(h.value.desc),1)])])]),e.createElementVNode("view",{class:"px-4 text-sm flex mb-4"},[e.createElementVNode("text",{onClick:T,class:"rounded bg-red-500 hover:bg-red-600 text-white py-1 px-4 mr-5"},"播放全部"),e.unref(f).state.collectList.some((e=>e.id==o.value&&e.platform==l.value))?e.withDirectives((e.openBlock(),e.createElementBlock("text",{key:0,onClick:C,class:"rounded bg-gray-600 hover:bg-gray-700 text-white py-1 px-4"}," 取消收藏 ",512)),[[e.vShow,0!=l.value]]):e.withDirectives((e.openBlock(),e.createElementBlock("text",{key:1,onClick:E,class:"rounded bg-gray-600 hover:bg-gray-700 text-white py-1 px-4"},"收藏歌单",512)),[[e.vShow,0!=l.value]]),e.withDirectives(e.createElementVNode("text",{onClick:V,class:"rounded bg-red-600 hover:bg-red-700 text-white py-1 px-4"},"删除歌单",512),[[e.vShow,0==l.value]])]),e.createElementVNode("view",{class:"flex-1 overflow-y-scroll"},[e.createVNode(v,{stripe:"",emptyText:"暂无更多数据"},{default:e.withCtx((()=>[e.createVNode(m,null,{default:e.withCtx((()=>[e.createVNode(s,{align:"left"},{default:e.withCtx((()=>[e.createTextVNode("歌曲")])),_:1}),e.createVNode(s,{align:"right",class:"w-24"},{default:e.withCtx((()=>[e.createTextVNode("操作")])),_:1})])),_:1}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,(t=>(e.openBlock(),e.createBlock(m,{key:t.id},{default:e.withCtx((()=>[e.createVNode(k,null,{default:e.withCtx((()=>[e.createElementVNode("view",{class:"flex flex-col",onClick:e=>(e=>{d.emit("playSong",{id:e.id,platform:l.value||e.platform||0})})(t)},[e.createElementVNode("view",{class:"text-sm font-bold"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"text-xs text-gray-400"},e.toDisplayString(t.author.map((e=>e.nickname)).join("/"))+" - "+e.toDisplayString(t.album),1)],8,["onClick"])])),_:2},1024),e.createVNode(k,{align:"right"},{default:e.withCtx((()=>[e.unref(f).state.likeList.some((e=>e.id==t.id&&e.platform==l.value))?(e.openBlock(),e.createElementBlock("text",{key:0,onClick:e=>(e=>{d.emit("unlike",{id:e.id,platform:l.value})})(t),class:"inline-block text-xl iconfont icon-chuangyikongjianICON_fuzhi- text-red-500 mr-2"},null,8,["onClick"])):(e.openBlock(),e.createElementBlock("text",{key:1,onClick:e=>(e=>{const{name:t,id:a,author:i,mv:n,time:o,album:s}=e;d.emit("addLike",{name:t,id:a,author:i,platform:l.value,mv:n,time:o,album:s})})(t),class:"inline-block iconfont icon-xihuan text-xl mr-2"},null,8,["onClick"])),e.createElementVNode("text",{onClick:a=>(t=>{g.value=e.toRaw(t),u.value=!0})(t),class:"inline-block iconfont icon-plus text-xl mr-2"},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})]),e.createVNode(We,{show:u.value,onConfirm:N,"onUpdate:show":n[0]||(n[0]=e=>u.value=e)},null,8,["show"])])}}}),Qe={setup(t){const a=v(),i=e.inject("$filters"),n=e.inject("$eventBus"),l=()=>{n.emit("playNext")},o=()=>{n.emit("playPrev")},s=e.ref(a.state.currentTime);a.state.audioManager.onPlay&&a.state.audioManager.onPlay((()=>{s.value=a.state.audioManager.currentTime})),a.state.audioManager.ontimeupdate=()=>{s.value=a.state.audioManager.currentTime},a.state.audioManager.onTimeUpdate&&a.state.audioManager.onTimeUpdate((()=>{s.value=a.state.audioManager.currentTime}));const r=a.state.lyric;e.ref(a.state.audioInfo.time);const c=e.computed((()=>r.findIndex(((e,t)=>s.value>e.time&&(!r[t+1]||s.value<r[t+1].time))))),d=()=>{a.commit("changeMode")},u=()=>{n.emit(a.state.audioPlaying?"pause":"play")},m=e=>{const t=uni.createSelectorQuery().in(this),i=uni.createSelectorQuery().in(this);t.select("#progress").boundingClientRect((t=>{i.select("#duration").boundingClientRect((i=>{const n=(e.detail.x-1.2*i.width)/t.width;a.state.audioManager.startTime=a.state.audioInfo.time/1e3*n})).exec()})).exec()};return(t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"bg-gray-800 bg-opacity-50 h_full relative w-full overflow-hidden flex flex-col text-gray-300 p-4 pt-24 border-red-500"},[e.createElementVNode("view",{class:"flex justify-around items-center px-8"},[e.createElementVNode("image",{"lazy-load":"true",class:"w-24 h-24 rounded",src:e.unref(a).state.audioInfo.picUrl},null,8,["src"]),e.createElementVNode("view",{class:"flex-1 truncate ml-5 flex flex-col justify-around"},[e.createElementVNode("text",{class:"text-xl"},e.toDisplayString(e.unref(a).state.audioInfo.name),1),e.createElementVNode("text",{class:"text-sm mt-3"},e.toDisplayString(e.unref(a).state.audioInfo.author&&e.unref(a).state.audioInfo.author.map((e=>e.name)).join("&")),1)])]),e.createElementVNode("scroll-view",{"scroll-into-view":"lyric"+(e.unref(c)-6),"scroll-with-animation":"","scroll-y":"",class:"gap-top lyric-container text-center text-base flex-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a).state.lyric,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass([{"linear-text highlight-line font-bold":e.unref(c)==a},"text-center leading-8"]),id:"lyric"+a,key:t.time+a},e.toDisplayString(t.words),11,["id"])))),128))],8,["scroll-into-view"]),e.createElementVNode("view",{class:"mt-5 h-32 flex flex-col justify-around"},[e.createElementVNode("view",{class:"flex items-center"},[e.createElementVNode("text",{id:"duration",class:"text-xs duration"},e.toDisplayString(e.unref(i).durationFormat(1e3*s.value)),1),e.createElementVNode("view",{class:"h-1 flex-1"},[e.createElementVNode("view",{id:"progress",class:"h-1 bg-gray-400 w-full relative rounded",onClick:m},[e.createElementVNode("view",{style:e.normalizeStyle({width:1e3*s.value/e.unref(a).state.audioInfo.time*100+"%"}),class:"absolute top-0 h-full w-0 bg-white rounded"},[e.createElementVNode("text",{class:"absolute w-3 h-3 rounded-full -right-1 -top-1 bg-white"})],4)])]),e.createElementVNode("text",{class:"text-xs duration"},e.toDisplayString(e.unref(i).durationFormat(e.unref(a).state.audioInfo.time)),1)]),e.createElementVNode("view",{class:"flex items-center justify-around"},[e.createElementVNode("text",{onClick:o,class:"iconfont icon-shangyishou"}),e.unref(a).state.audioPlaying?(e.openBlock(),e.createElementBlock("text",{key:0,onClick:u,class:"iconfont icon-zantingtingzhi"})):(e.openBlock(),e.createElementBlock("text",{key:1,onClick:u,class:"iconfont icon-bofang"})),e.createElementVNode("text",{onClick:l,class:"iconfont icon-xiayishou"}),0==e.unref(a).state.playMode?(e.openBlock(),e.createElementBlock("text",{key:2,onClick:d,class:"iconfont icon-xunhuan"})):1==e.unref(a).state.playMode?(e.openBlock(),e.createElementBlock("text",{key:3,onClick:d,class:"iconfont icon-suijibofang"})):2==e.unref(a).state.playMode?(e.openBlock(),e.createElementBlock("text",{key:4,onClick:d,class:"iconfont icon-danquxunhuan"})):e.createCommentVNode("",!0)])]),e.createElementVNode("view",{style:e.normalizeStyle({"z-index":-1,filter:"blur(15px)",opacity:.8,"background-image":`url(${e.unref(a).state.audioInfo.picUrl})`,"background-size":"auto 100%",transform:"scale(1.15)"}),class:"absolute left-0 top-0 w-full h-full"},null,4)]))}},Ke={setup(t){const a=e.ref(""),i=e.ref(1),n=e.ref([]),l=v(),o=e.inject("$eventBus"),s=e.ref(!1),r=e.ref({});m((e=>{a.value=e.keywords||"",i.value=e.platform||1}));const c=async e=>{var t,a,i;const n=await(l=e,J({url:`${K}/search/search/multimatch?keywords=${l}`}));var l;let o=[];return 200===n.data.code&&(o=null==(i=null==(a=null==(t=n.data)?void 0:t.result)?void 0:a.songs)?void 0:i.map((e=>({id:e.id,type:1,name:e.name,mvid:e.mvid,author:e.artists.map((e=>({name:e.name,id:e.id}))),album:e.album.name||e.name})))),o},d=async e=>{const t=await(a=e,te({url:`${ee}/getSmartbox?key=${a}&limit=30`}));var a;let i=[];return 0===t.data.response.code&&(i=t.data.response.data.song.itemlist.map((e=>({id:e.mid,type:2,name:e.name,mvid:e.mv,album:e.name,author:[{name:e.singer,id:e.singerid}]})))),i},u=async e=>{const t=await((e,t=1)=>re({url:`${se}/kugou/search?keywords=${e}&page=${t}`}))(e);let a=[];return 0===t.data.errcode&&(a=t.data.data.info.map((e=>({id:e.hash,type:3,name:e.songname,mvid:e.mvhash,author:[{name:e.singername,id:Math.random().toString(36).substr(2)}],album:e.album_name||e.filename.split("-")[1].trim()})))),a},h=async e=>{const t=await(a=e,ne({url:`${ie}/kuwo/search/searchMusicBykeyWord?key=${a}`}));var a;let i=[];return 200===t.data.code&&(i=t.data.data.list.map((e=>({id:e.musicrid,type:4,name:e.name,mv:e.mvpayinfo.vid,album:e.album||e.name,author:[{name:e.artist,id:e.artistid}]})))),i};e.watch([()=>a.value,()=>i.value],(async()=>{a.value.trim()&&(1==i.value?n.value=await c(a.value):2==i.value?n.value=await d(a.value):3==i.value?n.value=await h(a.value):4==i.value&&(n.value=await u(a.value)))})),e.watch((()=>i.value),(()=>{n.value=[]}));const p=t=>{o.emit("addSongToAlbum",{song:{id:r.value.id,platform:i.value||r.value.platform,name:r.value.name,author:e.toRaw(r.value.author),album:r.value.album,mv:r.value.mv,time:r.value.time},albumId:t})};return(t,c)=>(e.openBlock(),e.createElementBlock("view",{class:"h-full flex flex-col overflow-hidden"},[e.createElementVNode("view",{class:"bg-gray-100 px-4 py-2"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>a.value=e),class:"rounded-2xl bg-gradient-to-r from-blue-100 to-purple-100 px-2 text-sm h-8",placeholder:"请输入关键字"},null,512),[[e.vModelText,a.value]])]),e.createElementVNode("view",{class:"flex text-base bg-gray-100 mt-2"},[e.createElementVNode("text",{onClick:c[1]||(c[1]=e=>i.value=1),class:e.normalizeClass([{"bg-white":1==i.value},"py-1 flex-1 border-r text-center"])},"网易",2),e.createElementVNode("text",{onClick:c[2]||(c[2]=e=>i.value=2),class:e.normalizeClass([{"bg-white":2==i.value},"py-1 flex-1 border-r text-center"])},"QQ",2),e.createElementVNode("text",{onClick:c[3]||(c[3]=e=>i.value=3),class:e.normalizeClass([{"bg-white":3==i.value},"py-1 flex-1 border-r text-center"])},"酷我",2),e.createElementVNode("text",{onClick:c[4]||(c[4]=e=>i.value=4),class:e.normalizeClass([{"bg-white":4==i.value},"py-1 flex-1 border-r text-center"])},"酷狗",2)]),e.createElementVNode("scroll-view",{"scroll-y":"",class:"flex-1 overflow-y-scroll"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(t=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:"border-b px-4 py-2 flex items-center justify-between"},[e.createElementVNode("view",{class:"flex flex-col truncate flex-1",onClick:e=>(e=>{o.emit("playSong",{id:e.id,platform:i.value||e.platform||0})})(t)},[e.createElementVNode("text",{class:"truncate text-base"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"text-xs text-gray-500 mt-1 truncate"},e.toDisplayString(t.author.map((e=>e.name)).join("&"))+" - "+e.toDisplayString(t.album),1)],8,["onClick"]),e.createElementVNode("view",{class:"w-20 text-right flex-shrink-0 ml-4"},[e.unref(l).state.likeList.some((e=>e.id==t.id&&e.platform==i.value))?(e.openBlock(),e.createElementBlock("text",{key:0,onClick:e=>(e=>{o.emit("unlike",{id:e.id,platform:i.value})})(t),class:"iconfont icon-chuangyikongjianICON_fuzhi- text-red-500"},null,8,["onClick"])):(e.openBlock(),e.createElementBlock("text",{key:1,onClick:e=>(e=>{const{name:t,id:a,author:n,mvid:l,time:s,album:r}=e;o.emit("addLike",{name:t,id:a,author:n,platform:i.value,mv:l,time:s,album:r})})(t),class:"iconfont icon-xihuan"},null,8,["onClick"])),e.createElementVNode("text",{onClick:a=>(t=>{r.value=e.toRaw(t),s.value=!0})(t),class:"iconfont icon-plus ml-2"},null,8,["onClick"])])])))),128)),e.withDirectives(e.createElementVNode("view",{class:"flex flex-col text-gray-300 h-48 items-center justify-center"},[e.createElementVNode("text",{class:"iconfont icon-zanwushuju text-8xl"}),e.createElementVNode("text",null,"没有相关内容")],512),[[e.vShow,0==n.value.length]]),e.createVNode(We,{show:s.value,onConfirm:p,"onUpdate:show":c[5]||(c[5]=e=>s.value=e)},null,8,["show"])])]))}};var Je,Xe;function Ze(e){if(!e)return 0;const t=e.split(":");return 60*+t[0]+ +t[1]}"undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((a=>t.resolve(e()).then((()=>a))),(a=>t.resolve(e()).then((()=>{throw a}))))}),uni.restoreGlobal&&uni.restoreGlobal(a,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),__definePage("pages/index/index",ue),__definePage("pages/album/album",qe),__definePage("pages/lyric/lyric",Qe),__definePage("pages/search/search",Ke),(Xe=Je||(Je={}))[Xe.wy=1]="wy",Xe[Xe.qq=2]="qq",Xe[Xe.kg=4]="kg",Xe[Xe.kw=3]="kw",Xe[Xe.mg=5]="mg";const et=async(e,t)=>{var a,i,n,l;let o={name:"",author:[],time:0,picUrl:"",albumId:""};if(1==t){const t=await(e=>J({url:`${K}/song/detail?ids=${e}`}))(e);200===t.data.code&&(o.name=t.data.songs[0].name,o.author=t.data.songs[0].ar,o.picUrl=t.data.songs[0].al.picUrl,o.time=t.data.songs[0].dt)}else if(2==t){const t=await(e=>te({url:`${ee}/getSongInfo?songmid=${e}`}))(e);0===t.data.response.code&&(o.author=t.data.response.songinfo.data.track_info.singer.map((e=>({name:e.name,id:e.mid}))),o.name=t.data.response.songinfo.data.track_info.title,o.time=1e3*t.data.response.songinfo.data.track_info.interval,o.albumId=t.data.response.songinfo.data.track_info.album.mid);const a=await(e=>te({url:`${ee}/getImageUrl?id=${e}`}))(o.albumId);0===a.data.response.code&&(o.picUrl=a.data.response.data.imageUrl)}else if(3===t){let t=null==(a=e.toString().match(/\d+/))?void 0:a[0];const i=await(e=>ne({url:`${ie}/kuwo/musicInfo?mid=${e}`}))(t);200===i.data.code&&(o={name:i.data.data.name,author:[{name:i.data.data.artist,id:i.data.data.artistid}],time:1e3*i.data.data.duration,picUrl:i.data.data.pic})}else if(4===t){const t=await ce(e);o={name:t.data.songName,time:1e3*t.data.timeLength,picUrl:null==(n=null==(i=t.data)?void 0:i.imgUrl)?void 0:n.replace("{size}","400"),author:Array.isArray(t.data.authors)?null==(l=t.data.authors)?void 0:l.map((e=>({name:e.author_name,id:e.author_id}))):[{name:t.data.singerName||t.data.author_name,id:t.data.singerId}]}}return o},tt=async(e,t)=>{if(1==t){const t=await(e=>J({url:`${K}/song/url?id=${e}`}))(e);return!(200!=t.data.code||!t.data.data[0].url)&&t.data.data[0].url}if(2==t){const t=await(e=>te({url:`${ee}/getMusicPlay?songmid=${e}`}))(e);return!t.data.data.playUrl[e].error&&t.data.data.playUrl[e].url}if(3==t){const t=await((e,t="mp3")=>ne({url:`${ie}/kuwo/musicUrl?mid=${e}&format=${t}`}))(e);return 200===t.data.code&&t.data.data}if(4==t){const t=await ce(e);return t.data.url||t.data.backup_url[0]}},at=async(e,t)=>{let a=[{time:0,words:"歌词获取失败!"}];if(1===t){const t=await(e=>J({url:`${K}/lyric?id=${e}`}))(e);if(200==t.data.code){a=t.data.lrc.lyric.split("\n").filter((e=>e.trim())).map((e=>{let t=e.split("]"),a=t[1].trim();return{time:Ze(t[0].replace("[","").trim()),words:a}}))}}else if(2===t){const t=await(e=>te({url:`${ee}/getLyric?songmid=${e}`}))(e);if(0===t.data.response.code){a=t.data.response.lyric.split("\n").filter((e=>e.trim())).map((e=>{let t=e.split("]"),a=t[1].trim();return{time:Ze(t[0].replace("[","").trim()),words:a}}))}}else if(3===t){const t=await(e=>ne({url:`${ie}/kuwo/lrc?musicId=${e}`}))(e);200===t.data.status&&(a=t.data.data.lrclist.map((e=>({time:+e.time,words:e.lineLyric}))))}else if(4===t){const t=await getKGLyric(e);if(200===t.data.code){a=t.data.result.split("\r\n").filter((e=>"]"!==e[e.length-1]&&e.trim())).map((e=>{let t=e.split("]"),a=t[1].trim();return{time:Ze(t[0].replace("[","").trim()),words:a}}))}}return a},it={globalData:{audioSrc:"",audioInfo:{name:"ss",pic:"https://p2.music.126.net/qpvBqYIqkRhO9Ry2qOCdJQ==/2942293117852634.jpg"},audioName:"yyyy"},onLaunch:function(){const t=v();let a=!0;const i=e.inject("$eventBus");r("log","at App.vue:21","App Launch");const n=uni.getBackgroundAudioManager();t.commit("setAudioManager",n),n.onCanplay((()=>{a?(n.pause(),t.commit("changeAudioPlaying",!1),a=!1):(n.play(),t.commit("changeAudioPlaying",!0))})),n.onPause((()=>{t.commit("changeAudioPlaying",!1)})),n.onStop((()=>{t.commit("changeAudioPlaying",!1)})),n.onEnded((()=>{t.commit("changeAudioPlaying",!1),i.emit("playNext")})),n.onTimeUpdate((()=>{t.commit("changeCurrentTime",n.currentTime)})),t.commit("setPlayList",uni.getStorageSync("playList")),t.commit("setLikeList",uni.getStorageSync("likeList")),t.commit("setAlbumList",uni.getStorageSync("albumList")),t.commit("setCollectList",uni.getStorageSync("collectList")),i.on("addLike",(e=>{if(r("log","at App.vue:113",1),t.state.likeList.some((t=>t.id==e.id&&t.platform==e.platform)))return void uni.showToast({title:"歌曲已存在",icon:"none"});const a=[...t.state.likeList,e];uni.setStorageSync("likeList",a),t.commit("setLikeList",a)})),i.on("unlike",(e=>{let a=t.state.likeList.slice(0),i=a.findIndex((t=>t.id==e.id&&t.platform==e.platform));if(-1==i)return uni.showToast({title:"列表中无此歌曲",icon:"none"});a.splice(i,1),uni.setStorageSync("likeList",a),t.commit("setLikeList",a)})),i.on("addCollect",(a=>{if(r("log","at App.vue:146",e.toRaw(t.state.collectList),a),t.state.collectList.some((e=>e.id==a.id&&e.platform==a.platform)))return uni.showToast({title:"重复收藏!",icon:"none"});{let e=[...t.state.collectList,a];uni.setStorageSync("collectList",e),t.commit("setCollectList",e),uni.showToast({title:"收藏成功",icon:"none"})}})),i.on("unCollect",(e=>{let a=t.state.collectList,i=a.findIndex((t=>t.id==e.id&&t.platform==e.platform));if(-1==i)return uni.showToast({title:"列表中无此歌单",icon:"none"});a.splice(i,1),uni.setStorageSync("collectList",a),t.commit("setCollectList",a),uni.showToast({title:"已取消收藏",icon:"none"})})),i.on("addSongToAlbum",(({song:e,albumId:a})=>{let i=uni.getStorageSync("albumList")||[],n=i.findIndex((e=>e.id==a));if(i[n].list.some((t=>t.id==e.id&&t.platform==e.platform)))return uni.showToast({title:"重复添加",icon:"none"});i[n].list.push(e),uni.setStorageSync("albumList",i),t.commit("setAlbumList",i),uni.showToast({title:"添加成功",icon:"none"})})),i.on("delAlbum",(e=>{const a=uni.getStorageSync("albumList");let i=a.findIndex((t=>t.id==e));-1!=i&&(a.splice(i,1),uni.setStorageSync("albumList",a),t.commit("setAlbumList",a),uni.showToast({title:"删除成功",icon:"none"}))})),i.on("playSong",(async({id:e,platform:a,auto:n=!1,force:l=!1})=>{if(!e)return;if(t.state.audioIdBaseInfo.id==e&&!l)return;const o=await tt(e,a);if(!o){uni.showToast({title:"暂无播放地址",icon:"none"});let l=t.state.playList.findIndex((t=>t.id==e&&t.platform==a));return void(n&&l!=t.state.playList.length-1&&(t.commit("setAudioBaseInfo",{id:e,platform:a}),i.emit("playNext")))}t.state.audioManager.startTime=0;const s=await et(e,a);s.src=o,t.commit("setAudioInfo",{id:e,platform:a,songInfo:s});const r=await at(e,a);if(t.commit("setLyric",r),!n){let i=t.state.playList.slice(0),n=i.findIndex((t=>t.id==e&&t.platform==a));-1!==n&&i.splice(n,1),i.unshift({id:e,platform:a,name:s.name,author:s.author}),uni.setStorageSync("playList",i),t.commit("setPlayList",i)}uni.setStorageSync("currentSong",{id:e,platform:a,songInfo:s})})),i.on("playAll",(async e=>{uni.setStorageSync("playList",e),t.commit("setPlayList",e),i.emit("playSong",{id:e[0].id,platform:e[0].platform})})),i.on("playNext",(()=>{let e=t.state.playList,a=t.state.audioIdBaseInfo,n=t.state.playMode,l=e.findIndex((e=>e.id==a.id&&e.platform==a.platform));0==n?l=l==e.length-1?0:l+1:1==n&&(l=Math.floor(Math.random()*(e.length+1))),i.emit("playSong",{id:e[l].id,platform:e[l].platform,auto:!0,force:2==n})})),i.on("playPrev",(()=>{let e=t.state.playList,a=t.state.audioIdBaseInfo,n=t.state.playMode,l=e.findIndex((e=>e.id==a.id&&e.platform==a.platform));0==n?l=0==l?e.length-1:l-1:1==n&&(l=Math.floor(Math.random()*(e.length+1))),i.emit("playSong",{id:e[l].id,platform:e[l].platform,auto:!0,force:2==n})})),i.on("pause",(()=>{t.state.audioIdBaseInfo.id&&(t.state.audioManager.pause(),t.commit("changeAudioPlaying",!1))})),i.on("play",(()=>{t.state.audioIdBaseInfo.id&&(t.state.audioManager.play(),t.commit("changeAudioPlaying",!0))}));let l=uni.getStorageSync("currentSong");l&&i.emit("playSong",l)},onShow:function(){r("log","at App.vue:395","App Show")},onHide:function(){r("log","at App.vue:398","App Hide")},onLoad:function(){r("log","at App.vue:401",9999)}};const nt=new F({state:()=>({audioManager:null,currentTime:0,audioInfo:{name:"",art:[],time:0,picUrl:"",albumId:"",src:""},audioIdBaseInfo:{id:"",platform:""},audioPlaying:!1,playList:[],likeList:[],albumList:[],collectList:[],playMode:0,lyric:[]}),mutations:{setAudioManager(e,t){e.audioManager=t},setPlayMode(e,t){e.playMode=t},changeCurrentTime(e,t){e.currentTime=t},setLyric(e,t){e.lyric=t},changeMode(e){e.playMode=(e.playMode+1)%3},setAduioInfo(e,t,a=!0){e.audioInfo=t,e.audioManager.src=t.src,e.audioManager.title=t.name},setAudioBaseInfo(e,t){e.audioIdBaseInfo=t},setPlayList(e,t){e.playList=t||[]},setLikeList(e,t){e.likeList=t||[]},setAlbumList(e,t){e.albumList=t||[]},setCollectList(e,t){e.collectList=t||[]},setAudioInfo(e,t){e.audioIdBaseInfo={id:t.id,platform:t.platform},e.audioInfo=t.songInfo,e.audioManager.src=t.songInfo.src,e.audioManager.title=t.songInfo.name},changeAudioPlaying(e,t){e.audioPlaying=t}},actions:{}});const lt={timeFormat:e=>{if(!e)return"-";const t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate(),l=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),r=e=>e<10?"0"+e:e;return`${a}-${r(i)}-${r(n)} ${r(l)}:${r(o)}:${r(s)}`},dateFormat:e=>{if(!e)return"-";const t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate(),l=e=>e<10?"0"+e:e;return`${a}-${l(i)}-${l(n)}`},durationFormat:e=>{if(!e)return"00:00";const t=Math.floor(e/6e4),a=Math.floor(e%6e4/1e3),i=e=>e<10?"0"+e:e;return`${i(t)}:${i(a)}`},secToMin:e=>{const t=Math.floor(e/60),a=Math.floor(e%60),i=e=>e<10?"0"+e:e;return`${i(t)}:${i(a)}`},countFormat:e=>isNaN(+e)?0:e<1e4?e:e<1e8?Math.floor(e/1e4)+"万":Math.floor(e/1e8)+"亿",durationTransSec:e=>{if(!e)return 0;const t=e.split(":");return 60*+t[0]+ +t[1]}};const ot=function(){const t=e.createVueApp(it);var a;return t.use(nt),t.provide("$filters",lt),t.provide("$eventBus",{all:a=a||new Map,on:function(e,t){var i=a.get(e);i?i.push(t):a.set(e,[t])},off:function(e,t){var i=a.get(e);i&&(t?i.splice(i.indexOf(t)>>>0,1):a.set(e,[]))},emit:function(e,t){var i=a.get(e);i&&i.slice().map((function(e){e(t)})),(i=a.get("*"))&&i.slice().map((function(a){a(e,t)}))}}),{app:t}}().app;ot._component.mpType="app",ot._component.render=()=>{},ot.use(uni.__vuePlugin).mount("#app")}(Vue);
